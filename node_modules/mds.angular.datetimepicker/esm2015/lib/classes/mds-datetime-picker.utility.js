/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Mds } from 'mds.persian.datetime';
var PersianDateTime = Mds.PersianDateTime;
export class MdsDatetimePickerUtility {
    /**
     * @param {?} input
     * @return {?}
     */
    static toPersianNumber(input) {
        if (input == '' || input == null)
            return '';
        input = input.replace(/ي/img, 'ی').replace(/ك/img, 'ک');
        //۰ ۱ ۲ ۳ ۴ ۵ ۶ ۷ ۸ ۹
        return input.replace(/0/img, '۰')
            .replace(/1/img, '۱')
            .replace(/2/img, '۲')
            .replace(/3/img, '۳')
            .replace(/4/img, '۴')
            .replace(/5/img, '۵')
            .replace(/6/img, '۶')
            .replace(/7/img, '۷')
            .replace(/8/img, '۸')
            .replace(/9/img, '۹');
    }
    /**
     * @param {?} input
     * @return {?}
     */
    static toEnglishNumber(input) {
        if (input == '' || input == null)
            return 0;
        input = input.replace(/ي/img, 'ی').replace(/ك/img, 'ک');
        //۰ ۱ ۲ ۳ ۴ ۵ ۶ ۷ ۸ ۹
        input = input.replace(/,/img, '')
            .replace(/۰/img, '0')
            .replace(/۱/img, '1')
            .replace(/۲/img, '2')
            .replace(/۳/img, '3')
            .replace(/۴/img, '4')
            .replace(/۵/img, '5')
            .replace(/۶/img, '6')
            .replace(/۷/img, '7')
            .replace(/۸/img, '8')
            .replace(/۹/img, '9');
        return Number(input);
    }
    /**
     * @param {?} input
     * @return {?}
     */
    static toEnglishString(input) {
        if (input == '' || input == null)
            return '';
        input = input.replace(/ي/img, 'ی').replace(/ك/img, 'ک');
        //۰ ۱ ۲ ۳ ۴ ۵ ۶ ۷ ۸ ۹
        input = input.replace(/,/img, '')
            .replace(/۰/img, '0')
            .replace(/۱/img, '1')
            .replace(/۲/img, '2')
            .replace(/۳/img, '3')
            .replace(/۴/img, '4')
            .replace(/۵/img, '5')
            .replace(/۶/img, '6')
            .replace(/۷/img, '7')
            .replace(/۸/img, '8')
            .replace(/۹/img, '9');
        return input;
    }
    /**
     * @param {?} date
     * @param {?=} format
     * @return {?}
     */
    static dateTimeToString(date, format = '') {
        if (format == '' || format == null)
            return `${this.zeroPad(date.getFullYear(), '0000')}/${this.zeroPad(date.getMonth() + 1, '00')}/${this.zeroPad(date.getDate(), '00')}   ${this.zeroPad(date.getHours(), '00')}:${this.zeroPad(date.getMinutes(), '00')}:${this.zeroPad(date.getSeconds(), '00')}`;
        /** @type {?} */
        var dateTimeString = format;
        dateTimeString = dateTimeString.replace(/yyyy/, this.zeroPad(date.getFullYear(), '0000'));
        dateTimeString = dateTimeString.replace(/yy/, this.zeroPad(date.getFullYear(), '00'));
        dateTimeString = dateTimeString.replace(/dddd/, this.getGregorianWeekDayName(date.getDay()));
        dateTimeString = dateTimeString.replace(/dd/, this.zeroPad(date.getDate(), '00'));
        dateTimeString = dateTimeString.replace(/d/, date.getDate().toString());
        dateTimeString = dateTimeString.replace(/hh/, this.zeroPad(date.getHours(), '00'));
        dateTimeString = dateTimeString.replace(/h/, date.getHours().toString());
        dateTimeString = dateTimeString.replace(/mm/, this.zeroPad(date.getMinutes(), '00'));
        dateTimeString = dateTimeString.replace(/m/, date.getMinutes().toString());
        dateTimeString = dateTimeString.replace(/ss/, this.zeroPad(date.getSeconds(), '00'));
        dateTimeString = dateTimeString.replace(/s/, date.getSeconds().toString());
        dateTimeString = dateTimeString.replace(/fff/, this.zeroPad(date.getMilliseconds(), '000'));
        dateTimeString = dateTimeString.replace(/ff/, this.zeroPad(date.getMilliseconds() / 10, '00'));
        dateTimeString = dateTimeString.replace(/f/, (date.getMilliseconds() / 10).toString());
        dateTimeString = dateTimeString.replace(/MMMM/, this.getGregorianMonthName(date.getMonth()));
        dateTimeString = dateTimeString.replace(/MM/, this.zeroPad(date.getMonth() + 1, '00'));
        dateTimeString = dateTimeString.replace(/M(?!a)/, (date.getMonth() + 1).toString());
        return dateTimeString;
    }
    /**
     * @param {?} nr
     * @param {?} base
     * @return {?}
     */
    static zeroPad(nr, base) {
        if (nr == undefined || nr == '')
            return base;
        /** @type {?} */
        const len = (String(base).length - String(nr).length) + 1;
        return len > 0 ? new Array(len).join('0') + nr : nr;
    }
    /**
     * @param {?} monthIndex
     * @return {?}
     */
    static getGregorianMonthName(monthIndex) {
        return [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
        ][monthIndex];
    }
    /**
     * @param {?} weekDayIndex
     * @return {?}
     */
    static getGregorianWeekDayName(weekDayIndex) {
        return ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "FrIMdsAngularDateTimePickerDay", "Saturday"][weekDayIndex];
    }
    /**
     * @param {?} dateRangeString
     * @return {?}
     */
    static getPersianDateRanges(dateRangeString) {
        /** @type {?} */
        const startEndDateArrayResult = new Array();
        try {
            /** @type {?} */
            const startEndDateArray = dateRangeString.split(' - ');
            /** @type {?} */
            const startMdsPersianDateTime = PersianDateTime.parse(startEndDateArray[0]);
            /** @type {?} */
            const endMdsPersianDateTime = PersianDateTime.parse(startEndDateArray[1]);
            if (endMdsPersianDateTime.toDate() < startMdsPersianDateTime.toDate())
                throw new Error('Range date is not valid. End date must be bigger than start date');
            startEndDateArrayResult.push(startMdsPersianDateTime);
            startEndDateArrayResult.push(endMdsPersianDateTime);
        }
        catch (e) {
            throw new Error('Range date is not valid. You must enter range date string like "1396/03/06 - 1396/03/21"');
        }
        return startEndDateArrayResult;
    }
    /**
     * @param {?} dateRangeString
     * @return {?}
     */
    static getDateRanges(dateRangeString) {
        /** @type {?} */
        const startEndDateArrayResult = new Array();
        try {
            /** @type {?} */
            const startEndDateArray = dateRangeString.split(' - ');
            /** @type {?} */
            const startDateTime = new Date(Date.parse(startEndDateArray[0]));
            /** @type {?} */
            const endDateTime = new Date(Date.parse(startEndDateArray[1]));
            if (endDateTime < startDateTime)
                throw new Error('Range date is not valid. End date must be bigger than start date');
            startEndDateArrayResult.push(startDateTime);
            startEndDateArrayResult.push(endDateTime);
        }
        catch (e) {
            throw new Error('Range date is not valid. You must enter range date string like "2017/02/06 - 2017/02/18"');
        }
        return startEndDateArrayResult;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWRzLWRhdGV0aW1lLXBpY2tlci51dGlsaXR5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbWRzLmFuZ3VsYXIuZGF0ZXRpbWVwaWNrZXIvIiwic291cmNlcyI6WyJsaWIvY2xhc3Nlcy9tZHMtZGF0ZXRpbWUtcGlja2VyLnV0aWxpdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMzQyxJQUFPLGVBQWUsR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDO0FBRTdDLE1BQU07Ozs7O0lBQ0osTUFBTSxDQUFDLGVBQWUsQ0FBQyxLQUFhO1FBQ2xDLEVBQUUsQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFLElBQUksS0FBSyxJQUFJLElBQUksQ0FBQztZQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7UUFDNUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDeEQscUJBQXFCO1FBQ3JCLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDOUIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7YUFDcEIsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxQixD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QUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDOUQsRUFBRSxDQUFDLENBQUMsV0FBVyxHQUFHLGFBQWEsQ0FBQztnQkFDOUIsTUFBTSxJQUFJLEtBQUssQ0FBQyxrRUFBa0UsQ0FBQyxDQUFDO1lBQ3RGLHVCQUF1QixDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM1Qyx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDNUMsQ0FBQztRQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDWCxNQUFNLElBQUksS0FBSyxDQUFDLDBGQUEwRixDQUFDLENBQUM7UUFDOUcsQ0FBQztRQUNELE1BQU0sQ0FBQyx1QkFBdUIsQ0FBQztJQUNqQyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZHMgfSBmcm9tICdtZHMucGVyc2lhbi5kYXRldGltZSc7XHJcbmltcG9ydCBQZXJzaWFuRGF0ZVRpbWUgPSBNZHMuUGVyc2lhbkRhdGVUaW1lO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1kc0RhdGV0aW1lUGlja2VyVXRpbGl0eSB7XHJcbiAgc3RhdGljIHRvUGVyc2lhbk51bWJlcihpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGlmIChpbnB1dCA9PSAnJyB8fCBpbnB1dCA9PSBudWxsKSByZXR1cm4gJyc7XHJcbiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL9mKL2ltZywgJ9uMJykucmVwbGFjZSgv2YMvaW1nLCAn2qknKTtcclxuICAgIC8v27Ag27Eg27Ig27Mg27Qg27Ug27Yg27cg27gg27lcclxuICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC8wL2ltZywgJ9uwJylcclxuICAgICAgLnJlcGxhY2UoLzEvaW1nLCAn27EnKVxyXG4gICAgICAucmVwbGFjZSgvMi9pbWcsICfbsicpXHJcbiAgICAgIC5yZXBsYWNlKC8zL2ltZywgJ9uzJylcclxuICAgICAgLnJlcGxhY2UoLzQvaW1nLCAn27QnKVxyXG4gICAgICAucmVwbGFjZSgvNS9pbWcsICfbtScpXHJcbiAgICAgIC5yZXBsYWNlKC82L2ltZywgJ9u2JylcclxuICAgICAgLnJlcGxhY2UoLzcvaW1nLCAn27cnKVxyXG4gICAgICAucmVwbGFjZSgvOC9pbWcsICfbuCcpXHJcbiAgICAgIC5yZXBsYWNlKC85L2ltZywgJ9u5Jyk7XHJcbiAgfVxyXG4gIHN0YXRpYyB0b0VuZ2xpc2hOdW1iZXIoaW5wdXQ6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICBpZiAoaW5wdXQgPT0gJycgfHwgaW5wdXQgPT0gbnVsbCkgcmV0dXJuIDA7XHJcbiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoL9mKL2ltZywgJ9uMJykucmVwbGFjZSgv2YMvaW1nLCAn2qknKTtcclxuICAgIC8v27Ag27Eg27Ig27Mg27Qg27Ug27Yg27cg27gg27lcclxuICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvLC9pbWcsICcnKVxyXG4gICAgICAucmVwbGFjZSgv27AvaW1nLCAnMCcpXHJcbiAgICAgIC5yZXBsYWNlKC/bsS9pbWcsICcxJylcclxuICAgICAgLnJlcGxhY2UoL9uyL2ltZywgJzInKVxyXG4gICAgICAucmVwbGFjZSgv27MvaW1nLCAnMycpXHJcbiAgICAgIC5yZXBsYWNlKC/btC9pbWcsICc0JylcclxuICAgICAgLnJlcGxhY2UoL9u1L2ltZywgJzUnKVxyXG4gICAgICAucmVwbGFjZSgv27YvaW1nLCAnNicpXHJcbiAgICAgIC5yZXBsYWNlKC/bty9pbWcsICc3JylcclxuICAgICAgLnJlcGxhY2UoL9u4L2ltZywgJzgnKVxyXG4gICAgICAucmVwbGFjZSgv27kvaW1nLCAnOScpO1xyXG4gICAgcmV0dXJuIE51bWJlcihpbnB1dCk7XHJcbiAgfVxyXG4gIHN0YXRpYyB0b0VuZ2xpc2hTdHJpbmcoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAoaW5wdXQgPT0gJycgfHwgaW5wdXQgPT0gbnVsbCkgcmV0dXJuICcnO1xyXG4gICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC/Zii9pbWcsICfbjCcpLnJlcGxhY2UoL9mDL2ltZywgJ9qpJyk7XHJcbiAgICAvL9uwINuxINuyINuzINu0INu1INu2INu3INu4INu5XHJcbiAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoLywvaW1nLCAnJylcclxuICAgICAgLnJlcGxhY2UoL9uwL2ltZywgJzAnKVxyXG4gICAgICAucmVwbGFjZSgv27EvaW1nLCAnMScpXHJcbiAgICAgIC5yZXBsYWNlKC/bsi9pbWcsICcyJylcclxuICAgICAgLnJlcGxhY2UoL9uzL2ltZywgJzMnKVxyXG4gICAgICAucmVwbGFjZSgv27QvaW1nLCAnNCcpXHJcbiAgICAgIC5yZXBsYWNlKC/btS9pbWcsICc1JylcclxuICAgICAgLnJlcGxhY2UoL9u2L2ltZywgJzYnKVxyXG4gICAgICAucmVwbGFjZSgv27cvaW1nLCAnNycpXHJcbiAgICAgIC5yZXBsYWNlKC/buC9pbWcsICc4JylcclxuICAgICAgLnJlcGxhY2UoL9u5L2ltZywgJzknKTtcclxuICAgIHJldHVybiBpbnB1dDtcclxuICB9XHJcbiAgc3RhdGljIGRhdGVUaW1lVG9TdHJpbmcoZGF0ZTogRGF0ZSwgZm9ybWF0OiBzdHJpbmcgPSAnJyk6IHN0cmluZyB7XHJcbiAgICBpZiAoZm9ybWF0ID09ICcnIHx8IGZvcm1hdCA9PSBudWxsKVxyXG4gICAgICByZXR1cm4gYCR7dGhpcy56ZXJvUGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgJzAwMDAnKX0vJHt0aGlzLnplcm9QYWQoZGF0ZS5nZXRNb250aCgpICsgMSwgJzAwJyl9LyR7dGhpcy56ZXJvUGFkKGRhdGUuZ2V0RGF0ZSgpLCAnMDAnKX0gICAke3RoaXMuemVyb1BhZChkYXRlLmdldEhvdXJzKCksICcwMCcpfToke3RoaXMuemVyb1BhZChkYXRlLmdldE1pbnV0ZXMoKSwgJzAwJyl9OiR7dGhpcy56ZXJvUGFkKGRhdGUuZ2V0U2Vjb25kcygpLCAnMDAnKX1gO1xyXG4gICAgdmFyIGRhdGVUaW1lU3RyaW5nID0gZm9ybWF0O1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC95eXl5LywgdGhpcy56ZXJvUGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgJzAwMDAnKSk7XHJcbiAgICBkYXRlVGltZVN0cmluZyA9IGRhdGVUaW1lU3RyaW5nLnJlcGxhY2UoL3l5LywgdGhpcy56ZXJvUGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgJzAwJykpOyAgICBcclxuICAgIGRhdGVUaW1lU3RyaW5nID0gZGF0ZVRpbWVTdHJpbmcucmVwbGFjZSgvZGRkZC8sIHRoaXMuZ2V0R3JlZ29yaWFuV2Vla0RheU5hbWUoZGF0ZS5nZXREYXkoKSkpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9kZC8sIHRoaXMuemVyb1BhZChkYXRlLmdldERhdGUoKSwgJzAwJykpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9kLywgZGF0ZS5nZXREYXRlKCkudG9TdHJpbmcoKSk7XHJcbiAgICBkYXRlVGltZVN0cmluZyA9IGRhdGVUaW1lU3RyaW5nLnJlcGxhY2UoL2hoLywgdGhpcy56ZXJvUGFkKGRhdGUuZ2V0SG91cnMoKSwgJzAwJykpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9oLywgZGF0ZS5nZXRIb3VycygpLnRvU3RyaW5nKCkpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9tbS8sIHRoaXMuemVyb1BhZChkYXRlLmdldE1pbnV0ZXMoKSwgJzAwJykpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9tLywgZGF0ZS5nZXRNaW51dGVzKCkudG9TdHJpbmcoKSk7XHJcbiAgICBkYXRlVGltZVN0cmluZyA9IGRhdGVUaW1lU3RyaW5nLnJlcGxhY2UoL3NzLywgdGhpcy56ZXJvUGFkKGRhdGUuZ2V0U2Vjb25kcygpLCAnMDAnKSk7XHJcbiAgICBkYXRlVGltZVN0cmluZyA9IGRhdGVUaW1lU3RyaW5nLnJlcGxhY2UoL3MvLCBkYXRlLmdldFNlY29uZHMoKS50b1N0cmluZygpKTtcclxuICAgIGRhdGVUaW1lU3RyaW5nID0gZGF0ZVRpbWVTdHJpbmcucmVwbGFjZSgvZmZmLywgdGhpcy56ZXJvUGFkKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCksICcwMDAnKSk7XHJcbiAgICBkYXRlVGltZVN0cmluZyA9IGRhdGVUaW1lU3RyaW5nLnJlcGxhY2UoL2ZmLywgdGhpcy56ZXJvUGFkKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMCwgJzAwJykpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9mLywgKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMCkudG9TdHJpbmcoKSk7XHJcbiAgICBkYXRlVGltZVN0cmluZyA9IGRhdGVUaW1lU3RyaW5nLnJlcGxhY2UoL01NTU0vLCB0aGlzLmdldEdyZWdvcmlhbk1vbnRoTmFtZShkYXRlLmdldE1vbnRoKCkpKTtcclxuICAgIGRhdGVUaW1lU3RyaW5nID0gZGF0ZVRpbWVTdHJpbmcucmVwbGFjZSgvTU0vLCB0aGlzLnplcm9QYWQoZGF0ZS5nZXRNb250aCgpICsgMSwgJzAwJykpO1xyXG4gICAgZGF0ZVRpbWVTdHJpbmcgPSBkYXRlVGltZVN0cmluZy5yZXBsYWNlKC9NKD8hYSkvLCAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKSk7XHJcbiAgICByZXR1cm4gZGF0ZVRpbWVTdHJpbmc7XHJcbiAgfVxyXG4gIHN0YXRpYyB6ZXJvUGFkKG5yOiBhbnksIGJhc2U6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAobnIgPT0gdW5kZWZpbmVkIHx8IG5yID09ICcnKSByZXR1cm4gYmFzZTtcclxuICAgIGNvbnN0IGxlbiA9IChTdHJpbmcoYmFzZSkubGVuZ3RoIC0gU3RyaW5nKG5yKS5sZW5ndGgpICsgMTtcclxuICAgIHJldHVybiBsZW4gPiAwID8gbmV3IEFycmF5KGxlbikuam9pbignMCcpICsgbnIgOiBucjtcclxuICB9XHJcbiAgc3RhdGljIGdldEdyZWdvcmlhbk1vbnRoTmFtZShtb250aEluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgXCJKYW51YXJ5XCIsIFwiRmVicnVhcnlcIiwgXCJNYXJjaFwiLCBcIkFwcmlsXCIsIFwiTWF5XCIsIFwiSnVuZVwiLFxyXG4gICAgICBcIkp1bHlcIiwgXCJBdWd1c3RcIiwgXCJTZXB0ZW1iZXJcIiwgXCJPY3RvYmVyXCIsIFwiTm92ZW1iZXJcIiwgXCJEZWNlbWJlclwiXHJcbiAgICBdW21vbnRoSW5kZXhdO1xyXG4gIH1cclxuICBzdGF0aWMgZ2V0R3JlZ29yaWFuV2Vla0RheU5hbWUod2Vla0RheUluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIFtcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZySU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckRheVwiLCBcIlNhdHVyZGF5XCJdW3dlZWtEYXlJbmRleF07XHJcbiAgfVxyXG4gIHN0YXRpYyBnZXRQZXJzaWFuRGF0ZVJhbmdlcyhkYXRlUmFuZ2VTdHJpbmc6IHN0cmluZyk6IFBlcnNpYW5EYXRlVGltZVtdIHtcclxuICAgIGNvbnN0IHN0YXJ0RW5kRGF0ZUFycmF5UmVzdWx0ID0gbmV3IEFycmF5PFBlcnNpYW5EYXRlVGltZT4oKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHN0YXJ0RW5kRGF0ZUFycmF5ID0gZGF0ZVJhbmdlU3RyaW5nLnNwbGl0KCcgLSAnKTtcclxuICAgICAgY29uc3Qgc3RhcnRNZHNQZXJzaWFuRGF0ZVRpbWUgPSBQZXJzaWFuRGF0ZVRpbWUucGFyc2Uoc3RhcnRFbmREYXRlQXJyYXlbMF0pO1xyXG4gICAgICBjb25zdCBlbmRNZHNQZXJzaWFuRGF0ZVRpbWUgPSBQZXJzaWFuRGF0ZVRpbWUucGFyc2Uoc3RhcnRFbmREYXRlQXJyYXlbMV0pO1xyXG4gICAgICBpZiAoZW5kTWRzUGVyc2lhbkRhdGVUaW1lLnRvRGF0ZSgpIDwgc3RhcnRNZHNQZXJzaWFuRGF0ZVRpbWUudG9EYXRlKCkpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYW5nZSBkYXRlIGlzIG5vdCB2YWxpZC4gRW5kIGRhdGUgbXVzdCBiZSBiaWdnZXIgdGhhbiBzdGFydCBkYXRlJyk7XHJcbiAgICAgIHN0YXJ0RW5kRGF0ZUFycmF5UmVzdWx0LnB1c2goc3RhcnRNZHNQZXJzaWFuRGF0ZVRpbWUpO1xyXG4gICAgICBzdGFydEVuZERhdGVBcnJheVJlc3VsdC5wdXNoKGVuZE1kc1BlcnNpYW5EYXRlVGltZSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignUmFuZ2UgZGF0ZSBpcyBub3QgdmFsaWQuIFlvdSBtdXN0IGVudGVyIHJhbmdlIGRhdGUgc3RyaW5nIGxpa2UgXCIxMzk2LzAzLzA2IC0gMTM5Ni8wMy8yMVwiJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhcnRFbmREYXRlQXJyYXlSZXN1bHQ7XHJcbiAgfVxyXG4gIHN0YXRpYyBnZXREYXRlUmFuZ2VzKGRhdGVSYW5nZVN0cmluZzogc3RyaW5nKTogRGF0ZVtdIHtcclxuICAgIGNvbnN0IHN0YXJ0RW5kRGF0ZUFycmF5UmVzdWx0ID0gbmV3IEFycmF5PERhdGU+KCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdGFydEVuZERhdGVBcnJheSA9IGRhdGVSYW5nZVN0cmluZy5zcGxpdCgnIC0gJyk7XHJcbiAgICAgIGNvbnN0IHN0YXJ0RGF0ZVRpbWUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKHN0YXJ0RW5kRGF0ZUFycmF5WzBdKSk7XHJcbiAgICAgIGNvbnN0IGVuZERhdGVUaW1lID0gbmV3IERhdGUoRGF0ZS5wYXJzZShzdGFydEVuZERhdGVBcnJheVsxXSkpO1xyXG4gICAgICBpZiAoZW5kRGF0ZVRpbWUgPCBzdGFydERhdGVUaW1lKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignUmFuZ2UgZGF0ZSBpcyBub3QgdmFsaWQuIEVuZCBkYXRlIG11c3QgYmUgYmlnZ2VyIHRoYW4gc3RhcnQgZGF0ZScpO1xyXG4gICAgICBzdGFydEVuZERhdGVBcnJheVJlc3VsdC5wdXNoKHN0YXJ0RGF0ZVRpbWUpO1xyXG4gICAgICBzdGFydEVuZERhdGVBcnJheVJlc3VsdC5wdXNoKGVuZERhdGVUaW1lKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSYW5nZSBkYXRlIGlzIG5vdCB2YWxpZC4gWW91IG11c3QgZW50ZXIgcmFuZ2UgZGF0ZSBzdHJpbmcgbGlrZSBcIjIwMTcvMDIvMDYgLSAyMDE3LzAyLzE4XCInKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGFydEVuZERhdGVBcnJheVJlc3VsdDtcclxuICB9XHJcbn1cclxuIl19