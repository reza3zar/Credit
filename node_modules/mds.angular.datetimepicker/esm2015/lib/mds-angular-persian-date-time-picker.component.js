/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, forwardRef, Input, Output, ViewChild } from '@angular/core';
import { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { TemplateTypeEnum, TextBoxTypeEnum } from './classes/enums';
import { MdsDatetimePickerUtility } from './classes/mds-datetime-picker.utility';
import { MdsAngularPersianDateTimePickerCoreComponent } from './core/mds-angular-persian-date-time-picker-core.component';
export class MdsAngularPersianDateTimePickerComponent {
    /**
     * @param {?} element
     */
    constructor(element) {
        this.element = element;
        //#region Input OutPut
        /**
         * ÿßÿ≤ ÿ®Ÿàÿ™ ÿßÿ≥ÿ™ÿ±Ÿæ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ŸàÿØ €åÿß ŸÖÿ™ÿ±€åÿßŸÑ
         * TemplateTypeEnum
         */
        this.templateType = TemplateTypeEnum.bootstrap;
        /**
         * ŸÜŸàÿπ ŸÜŸÖÿß€åÿ¥ ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥
         * TextBoxTypeEnum
         */
        this.textBoxType = TextBoxTypeEnum.withButton;
        /**
         * ŸÖŸÇÿØÿßÿ± ÿßŸàŸÑ€åŸá
         */
        this.initialValue = '';
        /**
         * ŸÜŸàÿπ ŸÜŸÖÿß€åÿ¥ ÿØ€åÿ™ Ÿæ€å⁄©ÿ± ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿß€åŸÜ ŸÑÿß€åŸÜ ÿ®ÿßÿ¥ÿØ €åÿß ŸÜŸá
         */
        this.inLine = true;
        /**
         * ÿ¢€åÿß ÿßÿ≤ ⁄©ÿßÿ±ÿß⁄©ÿ™ÿ±Ÿáÿß€å ŸÅÿßÿ±ÿ≥€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ŸàÿØ
         * ŸàŸÇÿ™€å ÿ™ŸÇŸà€åŸÖ ŸÖ€åŸÑÿßÿØ€å ÿßÿ≥ÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿßÿ´€åÿ± ŸÖ€å ÿ¥ŸàÿØ
         */
        this.persianChar = true;
        /**
         * ÿ¢€åÿß ÿØ€åÿ™ Ÿæ€å⁄©ÿ± ÿ®Ÿá ÿ¥⁄©ŸÑ ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜÿ¨ ÿ™ÿßÿ±€åÿÆ€å ÿ®ÿßÿ¥ÿØ €åÿß ŸÜŸá
         */
        this.rangeSelector = false;
        /**
         * ÿ™ŸÇŸà€åŸÖ ŸÖ€åŸÑÿßÿØ€å ÿ®ÿßÿ¥ÿØ €åÿß ÿ¥ŸÖÿ≥€å
         */
        this.isPersian = true;
        /**
         * ÿ¢€åÿß ÿ™ÿß€åŸÖ Ÿæ€å⁄©ÿ± ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ÿ®ÿ¥ŸàÿØ €åÿß ŸÜŸá
         * ÿØÿ± ŸÜŸàÿπ ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜÿ¨ ÿ™ÿßÿ±€åÿÆ€å ÿ®ÿØŸàŸÜ ÿ™ÿßÿ´€åÿ± ÿßÿ≥ÿ™
         */
        this.timePicker = true;
        /**
         * PlaceHolder
         */
        this.placeHolder = '';
        /**
         * ÿ¢€å⁄©ŸàŸÜ
         */
        this.buttonIcon = 'üìÖ';
        /**
          * ŸÅÿ±ŸÖÿ™ Ÿæ€åÿ¥ ŸÅÿ±ÿ∂ 1393/09/14   13:49:40
          * yyyy: ÿ≥ÿßŸÑ ⁄ÜŸáÿßÿ± ÿ±ŸÇŸÖ€å
          * yy: ÿ≥ÿßŸÑ ÿØŸà ÿ±ŸÇŸÖ€å
          * MMMM: ŸÜÿßŸÖ ŸÅÿßÿ±ÿ≥€å ŸÖÿßŸá
          * MM: ÿπÿØÿØ ÿØŸà ÿ±ŸÇŸÖ€å ŸÖÿßŸá
          * M: ÿπÿØÿØ €å⁄© ÿ±ŸÇŸÖ€å ŸÖÿßŸá
          * dddd: ŸÜÿßŸÖ ŸÅÿßÿ±ÿ≥€å ÿ±Ÿàÿ≤ ŸáŸÅÿ™Ÿá
          * dd: ÿπÿØÿØ ÿØŸà ÿ±ŸÇŸÖ€å ÿ±Ÿàÿ≤ ŸÖÿßŸá
          * d: ÿπÿØÿØ €å⁄© ÿ±ŸÇŸÖ€å ÿ±Ÿàÿ≤ ŸÖÿßŸá
          * HH: ÿ≥ÿßÿπÿ™ ÿØŸà ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 00 ÿ™ÿß 24
          * H: ÿ≥ÿßÿπÿ™ €å⁄© ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 0 ÿ™ÿß 24
          * hh: ÿ≥ÿßÿπÿ™ ÿØŸà ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 00 ÿ™ÿß 12
          * h: ÿ≥ÿßÿπÿ™ €å⁄© ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 0 ÿ™ÿß 12
          * mm: ÿπÿØÿØ ÿØŸà ÿ±ŸÇŸÖ€å ÿØŸÇ€åŸÇŸá
          * m: ÿπÿØÿØ €å⁄© ÿ±ŸÇŸÖ€å ÿØŸÇ€åŸÇŸá
          * ss: ÿ´ÿßŸÜ€åŸá ÿØŸà ÿ±ŸÇŸÖ€å
          * s: ÿ´ÿßŸÜ€åŸá €å⁄© ÿ±ŸÇŸÖ€å
          * fff: ŸÖ€åŸÑ€å ÿ´ÿßŸÜ€åŸá 3 ÿ±ŸÇŸÖ€å
          * ff: ŸÖ€åŸÑ€å ÿ´ÿßŸÜ€åŸá 2 ÿ±ŸÇŸÖ€å
          * f: ŸÖ€åŸÑ€å ÿ´ÿßŸÜ€åŸá €å⁄© ÿ±ŸÇŸÖ€å
          * tt: ÿ®.ÿ∏ €åÿß ŸÇ.ÿ∏
          * t: ÿ≠ÿ±ŸÅ ÿßŸàŸÑ ÿßÿ≤ ÿ®.ÿ∏ €åÿß ŸÇ.ÿ∏
          **/
        this.format = '';
        /**
         * ŸàŸÇÿ™€å ÿ™ÿßÿ±€åÿÆ ÿßŸÜÿ™ÿÆÿßÿ®€å ÿπŸàÿ∂ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
         */
        this.dateChanged = new EventEmitter();
        /**
         * ŸàŸÇÿ™€å ÿ±ŸÜÿ¨ ÿ™ÿßÿ±€åÿÆ€å ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá ÿπŸàÿ∂ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
         */
        this.rangeDateChanged = new EventEmitter();
        /**
         * ŸàŸÇÿ™€å ⁄©ŸÑ€åÿØ€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ŸÅÿ¥ÿ±ÿØŸá ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
         */
        this.textBoxKeyDown = new EventEmitter();
        /**
         * ŸàŸÇÿ™€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ÿ®ŸÑŸàÿ± ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
         */
        this.textBoxBlur = new EventEmitter();
        /**
         * ŸàŸÇÿ™€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ŸÅŸà⁄©Ÿàÿ≥ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
         */
        this.textBoxFocus = new EventEmitter();
        /**
         * ŸàŸÇÿ™€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ÿ™ÿ∫€å€åÿ±€å ÿß€åÿ¨ÿßÿØ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
         */
        this.textBoxChange = new EventEmitter();
        //#endregion
        this.myControl = new FormControl();
        this.afterViewInit = false;
        this.inClearFunction = false;
        this.showingDateTimePickerLocked = false;
        this.showDatePicker = false;
        this._selectedDateTime = null;
        this._selectedDateTimeRanges = null;
        //#region ControlValueAccessor
        this.propagateChange = () => { };
        this.valIMdsAngularDateTimePickerDateFn = () => { };
        /** @type {?} */
        const doc = document.getElementsByTagName('html')[0];
        doc.addEventListener('click', (event) => {
            /** @type {?} */
            let targetElement = (/** @type {?} */ (event.target));
            if (this.showDatePicker && event.target &&
                this.element.nativeElement !== event.target &&
                !this.element.nativeElement.contains(event.target) &&
                !targetElement.hasAttribute('data-mds-persian-datetimepicker')) {
                this.showDatePicker = false;
                this.mdsDateTimePickerCore.hideSelecMonthAndYearBlock();
                this.mdsDateTimePickerCore.resetIncompleteRanges();
            }
        }, false);
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // this.initialValue = !this.persianChar ? MdsDatetimePickerUtility.toEnglishString(this.initialValue) : MdsDatetimePickerUtility.toPersianNumber(this.initialValue);
        // if (this.initialValue != '' && this.rangeSelector) {
        //   if (this.isPersian)
        //     MdsDatetimePickerUtility.getPersianDateRanges(this.initialValue);
        //   else
        //     MdsDatetimePickerUtility.getDateRanges(this.initialValue);
        // }
        // this.myControl.setValue(this.initialValue);
        if (!this.isPersian)
            this.persianChar = false;
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        this.afterViewInit = true;
    }
    /**
     * @return {?}
     */
    get selectedDateTime() {
        return this._selectedDateTime;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selectedDateTime(value) {
        if (!this.mdsDateTimePickerCore)
            return;
        try {
            this.mdsDateTimePickerCore.setDateTimeByDate(!value ? null : new Date(value));
            if (value == null)
                this._selectedDateTime = null;
            else
                this._selectedDateTime = new Date(value);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
    }
    /**
     * @return {?}
     */
    get selectedDateTimeRanges() {
        return this._selectedDateTimeRanges;
    }
    /**
     * @param {?} values
     * @return {?}
     */
    set selectedDateTimeRanges(values) {
        if (!this.mdsDateTimePickerCore)
            return;
        try {
            if (values == null || values.length < 2)
                return;
            this.mdsDateTimePickerCore.setDateTimeRangesByDate(values[0] == null ? null : new Date(values[0]), values[1] == null ? null : new Date(values[1]));
            this._selectedDateTimeRanges = [values[0], values[1]];
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    getEventObject(event) {
        return {
            eventArgs: event,
            selectedDate: this.mdsDateTimePickerCore.getSelectedDate,
            selectedRangeDates: this.mdsDateTimePickerCore.getSelectedRangeDates
        };
    }
    /**
     * @return {?}
     */
    getSelectedDateObject() {
        return {
            selectedDate: this.mdsDateTimePickerCore.getSelectedDate,
            selectedRangeDates: this.mdsDateTimePickerCore.getSelectedRangeDates
        };
    }
    /**
     * @return {?}
     */
    showDatePickerButtonClicked() {
        this.showDatePicker = !this.showDatePicker;
        if (this.showDatePicker) {
            //const rectObject = this.element.nativeElement.getBoundingClientRect();
            //this.topOffset = rectObject.top;
            //this.leftOffset = rectObject.left;
        }
    }
    /**
     * @param {?} date
     * @return {?}
     */
    dateChangedHandler(date) {
        if (!this.afterViewInit)
            return;
        this.dateChanged.emit(date);
        if (date != null) {
            this.myControl.setValue(date.formatString);
            this.selectedDateTime = new Date(date.utcDateTime);
            if (!this.showingDateTimePickerLocked)
                this.showDatePicker = false;
            this.propagateChange(this.getSelectedDateObject());
        }
    }
    /**
     * @param {?} rangeDate
     * @return {?}
     */
    rangeDateChangedHandler(rangeDate) {
        if (!this.afterViewInit)
            return;
        this.myControl.setValue('');
        if (rangeDate == null) {
            this.rangeDateChanged.emit(rangeDate);
            this.selectedDateTimeRanges = [null, null];
            this.propagateChange(this.getSelectedDateObject());
            return;
        }
        if (rangeDate.startDate.formatString != '' && rangeDate.endDate.formatString != '')
            this.myControl.setValue(`${rangeDate.startDate.formatString} - ${rangeDate.endDate.formatString}`);
        this.rangeDateChanged.emit(rangeDate);
        if (rangeDate.startDate.formatString != '' && rangeDate.endDate.formatString != '' && !this.showingDateTimePickerLocked)
            this.showDatePicker = false;
        this.selectedDateTimeRanges = [rangeDate.startDate.utcDateTime, rangeDate.endDate.utcDateTime];
        this.propagateChange(this.getSelectedDateObject());
    }
    /**
     * @param {?} event
     * @return {?}
     */
    dateTimeTextBoxOnFocusHandler(event) {
        document.getElementsByTagName('html')[0].click();
        try {
            if (this.selectedDateTime != null)
                this.mdsDateTimePickerCore.setDateTimeByDate(this.selectedDateTime);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
        this.showDatePickerButtonClicked();
        this.textBoxFocus.emit(this.getEventObject(event));
    }
    /**
     * @param {?} event
     * @return {?}
     */
    dateTimeTextBoxOnBlurHandler(event) {
        /** @type {?} */
        let value = !this.myControl.value ? '' : this.myControl.value.trim();
        if (this.persianChar)
            value = MdsDatetimePickerUtility.toPersianNumber(value);
        else
            value = MdsDatetimePickerUtility.toEnglishString(value);
        /** @type {?} */
        let targetElement = (/** @type {?} */ (event.target));
        if (!targetElement.hasAttribute('data-mds-persian-datetimepicker')) {
            this.showingDateTimePickerLocked = true;
            this.mdsDateTimePickerCore.setDateTimeByString(value);
            this.showingDateTimePickerLocked = false;
        }
        this.textBoxBlur.emit(this.getEventObject(event));
    }
    /**
     * @param {?} event
     * @return {?}
     */
    dateTimeTextBoxOnKeyDownHandler(event) {
        if (event.keyCode != 13) {
            this.textBoxKeyDown.emit(this.getEventObject(event));
            return;
        }
        /** @type {?} */
        let value = event.target.value.trim();
        if (!value)
            this.mdsDateTimePickerCore.clearDateTimePicker();
        else
            this.mdsDateTimePickerCore.setDateTimeByString(value);
        this.showDatePicker = false;
        this.textBoxKeyDown.emit(this.getEventObject(event));
    }
    /**
     * @return {?}
     */
    clear() {
        if (this.inClearFunction || !this.mdsDateTimePickerCore)
            return;
        this.inClearFunction = true;
        this.myControl.setValue('');
        this.selectedDateTime = null;
        this.selectedDateTimeRanges = [null, null];
        this.mdsDateTimePickerCore.clearDateTimePicker();
        this.inClearFunction = false;
    }
    /**
     * @param {?} dateTime
     * @return {?}
     */
    setDateTime(dateTime) {
        try {
            this.mdsDateTimePickerCore.setDateTimeByDate(dateTime);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
    }
    /**
     * @param {?} startDateTime
     * @param {?} endDateTime
     * @return {?}
     */
    setDateTimeRanges(startDateTime, endDateTime) {
        try {
            this.mdsDateTimePickerCore.setDateTimeRangesByDate(startDateTime, endDateTime);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
    }
    /**
     * @return {?}
     */
    showDateTimePicker() {
        this.showDatePicker = true;
    }
    /**
     * @return {?}
     */
    hideDateTimePicker() {
        this.showDatePicker = false;
    }
    /**
     * @param {?} valueModel
     * @return {?}
     */
    writeValue(valueModel) {
        if (!valueModel || (!valueModel.selectedDate && !valueModel.selectedRangeDates)) {
            this.clear();
            return;
        }
        if (this.rangeSelector && valueModel.selectedRangeDates)
            this.selectedDateTimeRanges = [valueModel.selectedRangeDates.startDate.utcDateTime, valueModel.selectedRangeDates.endDate.utcDateTime];
        else if (valueModel.selectedDate)
            this.selectedDateTime = valueModel.selectedDate.utcDateTime;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnChange(fn) {
        this.propagateChange = fn;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    registerOnTouched(fn) {
    }
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    setDisabledState(isDisabled) {
        //this.disabled = isDisabled
        if (isDisabled)
            this.myControl.disable();
        else
            this.myControl.enable();
    }
    /**
     * @param {?} c
     * @return {?}
     */
    valIMdsAngularDateTimePickerDate(c) {
        return this.valIMdsAngularDateTimePickerDateFn(c.value);
    }
}
MdsAngularPersianDateTimePickerComponent.decorators = [
    { type: Component, args: [{
                selector: 'mds-angular-persian-datetimepicker',
                template: "<div *ngIf=\"inLine\" class=\"datepicker-box\">\r\n  <mds-datetime-picker-core *ngIf=\"inLine\" [initialValue]=\"initialValue\" [rangeSelector]=\"rangeSelector\" [persianChar]=\"persianChar\"\r\n    [isPersian]=\"isPersian\" [timePicker]=\"timePicker\" [format]=\"format\" [templateType]=\"templateType\" #mdsDateTimePickerCore\r\n    (dateChanged)=\"dateChangedHandler($event)\" (rangeDateChanged)=\"rangeDateChangedHandler($event)\">\r\n  </mds-datetime-picker-core>\r\n</div>\r\n\r\n<div *ngIf=\"!inLine && templateType == 2\" class=\"datepicker-container\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" [placeholder]=\"placeHolder\" [formControl]=\"myControl\" (focus)=\"dateTimeTextBoxOnFocusHandler($event)\"\r\n      (blur)=\"dateTimeTextBoxOnBlurHandler($event)\" (keydown)=\"dateTimeTextBoxOnKeyDownHandler($event)\" data-mds-persian-datetimepicker>\r\n    <span matPrefix>\r\n      <span *ngIf=\"textBoxType == 1\" mat-button class=\"calendar-icon cursor-pointer\">\r\n        <span [innerHTML]=\"buttonIcon\"></span>\r\n      </span>\r\n    </span>\r\n  </mat-form-field>\r\n  <div class=\"datepicker\" [hidden]=\"!showDatePicker\">\r\n    <mds-datetime-picker-core #mdsDateTimePickerCore [initialValue]=\"initialValue\" [rangeSelector]=\"rangeSelector\" [persianChar]=\"persianChar\"\r\n      [isPersian]=\"isPersian\" [timePicker]=\"timePicker\" [format]=\"format\" [templateType]=\"2\" (dateChanged)=\"dateChangedHandler($event)\"\r\n      (rangeDateChanged)=\"rangeDateChangedHandler($event)\">\r\n    </mds-datetime-picker-core>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"!inLine && templateType == 1\" class=\"datepicker-container\">\r\n  <div class=\"input-group\" *ngIf=\"textBoxType == 1\">\r\n    <div class=\"input-group-prepend cursor-pointer calendar-icon\" (click)=\"showDatePickerButtonClicked()\">\r\n      <span class=\"input-group-text\" [innerHTML]=\"buttonIcon\"></span>\r\n    </div>\r\n    <input type=\"text\" class=\"form-control\" [placeholder]=\"placeHolder\" [formControl]=\"myControl\" (focus)=\"dateTimeTextBoxOnFocusHandler($event)\"\r\n      (blur)=\"dateTimeTextBoxOnBlurHandler($event)\" (keydown)=\"dateTimeTextBoxOnKeyDownHandler($event)\" data-mds-persian-datetimepicker>\r\n  </div>\r\n  <input type=\"text\" *ngIf=\"textBoxType == 2\" [placeholder]=\"placeHolder\" class=\"form-control\" [formControl]=\"myControl\" (focus)=\"dateTimeTextBoxOnFocusHandler($event)\"\r\n    (blur)=\"dateTimeTextBoxOnBlurHandler($event)\" (keydown)=\"dateTimeTextBoxOnKeyDownHandler($event)\" data-mds-persian-datetimepicker>\r\n  <div class=\"datepicker datepicker-bootstrap\" [hidden]=\"!showDatePicker\">\r\n    <mds-datetime-picker-core #mdsDateTimePickerCore [initialValue]=\"initialValue\" [rangeSelector]=\"rangeSelector\" [persianChar]=\"persianChar\"\r\n      [isPersian]=\"isPersian\" [timePicker]=\"timePicker\" [format]=\"format\" [templateType]=\"1\" (dateChanged)=\"dateChangedHandler($event)\"\r\n      (rangeDateChanged)=\"rangeDateChangedHandler($event)\">\r\n    </mds-datetime-picker-core>\r\n  </div>\r\n</div>",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef(() => MdsAngularPersianDateTimePickerComponent),
                        multi: true
                    }
                ],
                styles: [".datepicker-container{position:relative;direction:ltr}.datepicker{background:#fff;position:absolute;z-index:999999;top:53px;left:0;min-width:300px;border:1px solid #f7f7f7;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.datepicker-bootstrap{top:34px}.hidden{display:none}.cursor-pointer{cursor:pointer}.datepicker-box{border:1px solid #ccc;position:relative}.mat-form-field{width:100%}.calendar-icon{font-size:18px}.calendar-icon[mat-button]{margin-right:6px;float:left}"]
            }] }
];
MdsAngularPersianDateTimePickerComponent.ctorParameters = () => [
    { type: ElementRef }
];
MdsAngularPersianDateTimePickerComponent.propDecorators = {
    mdsDateTimePickerCore: [{ type: ViewChild, args: ['mdsDateTimePickerCore',] }],
    templateType: [{ type: Input }],
    textBoxType: [{ type: Input }],
    initialValue: [{ type: Input }],
    inLine: [{ type: Input }],
    persianChar: [{ type: Input }],
    rangeSelector: [{ type: Input }],
    isPersian: [{ type: Input }],
    timePicker: [{ type: Input }],
    placeHolder: [{ type: Input }],
    buttonIcon: [{ type: Input }],
    format: [{ type: Input }],
    dateChanged: [{ type: Output }],
    rangeDateChanged: [{ type: Output }],
    textBoxKeyDown: [{ type: Output }],
    textBoxBlur: [{ type: Output }],
    textBoxFocus: [{ type: Output }],
    textBoxChange: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.mdsDateTimePickerCore;
    /**
     * ÿßÿ≤ ÿ®Ÿàÿ™ ÿßÿ≥ÿ™ÿ±Ÿæ ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ŸàÿØ €åÿß ŸÖÿ™ÿ±€åÿßŸÑ
     * TemplateTypeEnum
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.templateType;
    /**
     * ŸÜŸàÿπ ŸÜŸÖÿß€åÿ¥ ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥
     * TextBoxTypeEnum
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxType;
    /**
     * ŸÖŸÇÿØÿßÿ± ÿßŸàŸÑ€åŸá
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.initialValue;
    /**
     * ŸÜŸàÿπ ŸÜŸÖÿß€åÿ¥ ÿØ€åÿ™ Ÿæ€å⁄©ÿ± ÿ®Ÿá ÿµŸàÿ±ÿ™ ÿß€åŸÜ ŸÑÿß€åŸÜ ÿ®ÿßÿ¥ÿØ €åÿß ŸÜŸá
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.inLine;
    /**
     * ÿ¢€åÿß ÿßÿ≤ ⁄©ÿßÿ±ÿß⁄©ÿ™ÿ±Ÿáÿß€å ŸÅÿßÿ±ÿ≥€å ÿßÿ≥ÿ™ŸÅÿßÿØŸá ÿ¥ŸàÿØ
     * ŸàŸÇÿ™€å ÿ™ŸÇŸà€åŸÖ ŸÖ€åŸÑÿßÿØ€å ÿßÿ≥ÿ™ ÿ®ÿØŸàŸÜ ÿ™ÿßÿ´€åÿ± ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.persianChar;
    /**
     * ÿ¢€åÿß ÿØ€åÿ™ Ÿæ€å⁄©ÿ± ÿ®Ÿá ÿ¥⁄©ŸÑ ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜÿ¨ ÿ™ÿßÿ±€åÿÆ€å ÿ®ÿßÿ¥ÿØ €åÿß ŸÜŸá
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.rangeSelector;
    /**
     * ÿ™ŸÇŸà€åŸÖ ŸÖ€åŸÑÿßÿØ€å ÿ®ÿßÿ¥ÿØ €åÿß ÿ¥ŸÖÿ≥€å
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.isPersian;
    /**
     * ÿ¢€åÿß ÿ™ÿß€åŸÖ Ÿæ€å⁄©ÿ± ŸÜŸÖÿß€åÿ¥ ÿØÿßÿØŸá ÿ®ÿ¥ŸàÿØ €åÿß ŸÜŸá
     * ÿØÿ± ŸÜŸàÿπ ÿßŸÜÿ™ÿÆÿßÿ® ÿ±ŸÜÿ¨ ÿ™ÿßÿ±€åÿÆ€å ÿ®ÿØŸàŸÜ ÿ™ÿßÿ´€åÿ± ÿßÿ≥ÿ™
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.timePicker;
    /**
     * PlaceHolder
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.placeHolder;
    /**
     * ÿ¢€å⁄©ŸàŸÜ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.buttonIcon;
    /**
     * ŸÅÿ±ŸÖÿ™ Ÿæ€åÿ¥ ŸÅÿ±ÿ∂ 1393/09/14   13:49:40
     * yyyy: ÿ≥ÿßŸÑ ⁄ÜŸáÿßÿ± ÿ±ŸÇŸÖ€å
     * yy: ÿ≥ÿßŸÑ ÿØŸà ÿ±ŸÇŸÖ€å
     * MMMM: ŸÜÿßŸÖ ŸÅÿßÿ±ÿ≥€å ŸÖÿßŸá
     * MM: ÿπÿØÿØ ÿØŸà ÿ±ŸÇŸÖ€å ŸÖÿßŸá
     * M: ÿπÿØÿØ €å⁄© ÿ±ŸÇŸÖ€å ŸÖÿßŸá
     * dddd: ŸÜÿßŸÖ ŸÅÿßÿ±ÿ≥€å ÿ±Ÿàÿ≤ ŸáŸÅÿ™Ÿá
     * dd: ÿπÿØÿØ ÿØŸà ÿ±ŸÇŸÖ€å ÿ±Ÿàÿ≤ ŸÖÿßŸá
     * d: ÿπÿØÿØ €å⁄© ÿ±ŸÇŸÖ€å ÿ±Ÿàÿ≤ ŸÖÿßŸá
     * HH: ÿ≥ÿßÿπÿ™ ÿØŸà ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 00 ÿ™ÿß 24
     * H: ÿ≥ÿßÿπÿ™ €å⁄© ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 0 ÿ™ÿß 24
     * hh: ÿ≥ÿßÿπÿ™ ÿØŸà ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 00 ÿ™ÿß 12
     * h: ÿ≥ÿßÿπÿ™ €å⁄© ÿ±ŸÇŸÖ€å ÿ®ÿß ŸÅÿ±ŸÖÿ™ 0 ÿ™ÿß 12
     * mm: ÿπÿØÿØ ÿØŸà ÿ±ŸÇŸÖ€å ÿØŸÇ€åŸÇŸá
     * m: ÿπÿØÿØ €å⁄© ÿ±ŸÇŸÖ€å ÿØŸÇ€åŸÇŸá
     * ss: ÿ´ÿßŸÜ€åŸá ÿØŸà ÿ±ŸÇŸÖ€å
     * s: ÿ´ÿßŸÜ€åŸá €å⁄© ÿ±ŸÇŸÖ€å
     * fff: ŸÖ€åŸÑ€å ÿ´ÿßŸÜ€åŸá 3 ÿ±ŸÇŸÖ€å
     * ff: ŸÖ€åŸÑ€å ÿ´ÿßŸÜ€åŸá 2 ÿ±ŸÇŸÖ€å
     * f: ŸÖ€åŸÑ€å ÿ´ÿßŸÜ€åŸá €å⁄© ÿ±ŸÇŸÖ€å
     * tt: ÿ®.ÿ∏ €åÿß ŸÇ.ÿ∏
     * t: ÿ≠ÿ±ŸÅ ÿßŸàŸÑ ÿßÿ≤ ÿ®.ÿ∏ €åÿß ŸÇ.ÿ∏
     *
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.format;
    /**
     * ŸàŸÇÿ™€å ÿ™ÿßÿ±€åÿÆ ÿßŸÜÿ™ÿÆÿßÿ®€å ÿπŸàÿ∂ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.dateChanged;
    /**
     * ŸàŸÇÿ™€å ÿ±ŸÜÿ¨ ÿ™ÿßÿ±€åÿÆ€å ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØŸá ÿπŸàÿ∂ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.rangeDateChanged;
    /**
     * ŸàŸÇÿ™€å ⁄©ŸÑ€åÿØ€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ŸÅÿ¥ÿ±ÿØŸá ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxKeyDown;
    /**
     * ŸàŸÇÿ™€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ÿ®ŸÑŸàÿ± ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxBlur;
    /**
     * ŸàŸÇÿ™€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ŸÅŸà⁄©Ÿàÿ≥ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxFocus;
    /**
     * ŸàŸÇÿ™€å ÿ±Ÿà€å ÿ™⁄©ÿ≥ ÿ®ÿß⁄©ÿ≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ™ÿßÿ±€åÿÆ ÿ™ÿ∫€å€åÿ±€å ÿß€åÿ¨ÿßÿØ ŸÖ€å ÿ¥ŸàÿØ ÿß€åŸÜ ÿßŸàŸÜÿ™ ŸÅÿ±ÿßÿÆŸàÿßŸÜ€å ŸÖ€å ÿ¥ŸàÿØ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxChange;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.myControl;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.afterViewInit;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.inClearFunction;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.showingDateTimePickerLocked;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.showDatePicker;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype._selectedDateTime;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype._selectedDateTimeRanges;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.propagateChange;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.valIMdsAngularDateTimePickerDateFn;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.element;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWRzLWFuZ3VsYXItcGVyc2lhbi1kYXRlLXRpbWUtcGlja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL21kcy5hbmd1bGFyLmRhdGV0aW1lcGlja2VyLyIsInNvdXJjZXMiOlsibGliL21kcy1hbmd1bGFyLXBlcnNpYW4tZGF0ZS10aW1lLXBpY2tlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pJLE9BQU8sRUFBd0IsV0FBVyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFdEYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRXBFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSw0Q0FBNEMsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBaUIxSCxNQUFNOzs7O0lBRUosWUFBb0IsT0FBbUI7UUFBbkIsWUFBTyxHQUFQLE9BQU8sQ0FBWTtRQWdDdkMsc0JBQXNCO1FBR3RCOzs7V0FHRztRQUNNLGlCQUFZLEdBQXFCLGdCQUFnQixDQUFDLFNBQVMsQ0FBQztRQUVyRTs7O1dBR0c7UUFDTSxnQkFBVyxHQUFvQixlQUFlLENBQUMsVUFBVSxDQUFDO1FBQ25FOztXQUVHO1FBQ00saUJBQVksR0FBRyxFQUFFLENBQUM7UUFDM0I7O1dBRUc7UUFDTSxXQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCOzs7V0FHRztRQUNNLGdCQUFXLEdBQUcsSUFBSSxDQUFDO1FBQzVCOztXQUVHO1FBQ00sa0JBQWEsR0FBRyxLQUFLLENBQUM7UUFDL0I7O1dBRUc7UUFDTSxjQUFTLEdBQUcsSUFBSSxDQUFDO1FBQzFCOzs7V0FHRztRQUNNLGVB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QUEyQjs7Ozs7SUFJM0IsK0RBQTBCOzs7OztJQUkxQiw4REFBMkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXlCM0IsMERBQXFCOzs7OztJQUtyQiwrREFBMEU7Ozs7O0lBSTFFLG9FQUFvRjs7Ozs7SUFJcEYsa0VBQW1GOzs7OztJQUluRiwrREFBZ0Y7Ozs7O0lBSWhGLGdFQUFpRjs7Ozs7SUFJakYsaUVBQWtGOztJQUlsRiw2REFBOEI7O0lBQzlCLGlFQUE4Qjs7SUFDOUIsbUVBQWdDOztJQUNoQywrRUFBNEM7O0lBQzVDLGtFQUF1Qjs7SUFFdkIscUVBQXVDOztJQWtCdkMsMkVBQStDOztJQThJL0MsbUVBQXlDOztJQUN6QyxzRkFBNEQ7O0lBNVNoRCwyREFBMkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZnRlclZpZXdJbml0LCBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgZm9yd2FyZFJlZiwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgQ29udHJvbFZhbHVlQWNjZXNzb3IsIEZvcm1Db250cm9sLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcclxuaW1wb3J0IHsgTWRzIH0gZnJvbSAnbWRzLnBlcnNpYW4uZGF0ZXRpbWUnO1xyXG5pbXBvcnQgeyBUZW1wbGF0ZVR5cGVFbnVtLCBUZXh0Qm94VHlwZUVudW0gfSBmcm9tICcuL2NsYXNzZXMvZW51bXMnO1xyXG5pbXBvcnQgeyBJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZSwgSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckV2ZW50TW9kZWwsIElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJSYW5nZURhdGUsIElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJEYXRlTW9kZWwgfSBmcm9tICcuL2NsYXNzZXMvaW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IE1kc0RhdGV0aW1lUGlja2VyVXRpbGl0eSB9IGZyb20gJy4vY2xhc3Nlcy9tZHMtZGF0ZXRpbWUtcGlja2VyLnV0aWxpdHknO1xyXG5pbXBvcnQgeyBNZHNBbmd1bGFyUGVyc2lhbkRhdGVUaW1lUGlja2VyQ29yZUNvbXBvbmVudCB9IGZyb20gJy4vY29yZS9tZHMtYW5ndWxhci1wZXJzaWFuLWRhdGUtdGltZS1waWNrZXItY29yZS5jb21wb25lbnQnO1xyXG5pbXBvcnQgUGVyc2lhbkRhdGVUaW1lID0gTWRzLlBlcnNpYW5EYXRlVGltZTtcclxuXHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ21kcy1hbmd1bGFyLXBlcnNpYW4tZGF0ZXRpbWVwaWNrZXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi9tZHMtYW5ndWxhci1wZXJzaWFuLWRhdGUtdGltZS1waWNrZXIuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL21kcy1hbmd1bGFyLXBlcnNpYW4tZGF0ZS10aW1lLXBpY2tlci5jb21wb25lbnQuY3NzJ10sXHJcbiAgcHJvdmlkZXJzOlxyXG4gICAgW1xyXG4gICAgICB7XHJcbiAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXHJcbiAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTWRzQW5ndWxhclBlcnNpYW5EYXRlVGltZVBpY2tlckNvbXBvbmVudCksXHJcbiAgICAgICAgbXVsdGk6IHRydWVcclxuICAgICAgfVxyXG4gICAgXVxyXG59KVxyXG5leHBvcnQgY2xhc3MgTWRzQW5ndWxhclBlcnNpYW5EYXRlVGltZVBpY2tlckNvbXBvbmVudCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yLCBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEVsZW1lbnRSZWYpIHtcclxuICAgIGNvbnN0IGRvYyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF07XHJcbiAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgbGV0IHRhcmdldEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgIGlmICh0aGlzLnNob3dEYXRlUGlja2VyICYmIGV2ZW50LnRhcmdldCAmJlxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50ICE9PSBldmVudC50YXJnZXQgJiZcclxuICAgICAgICAhdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSAmJlxyXG4gICAgICAgICF0YXJnZXRFbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tZHMtcGVyc2lhbi1kYXRldGltZXBpY2tlcicpKSB7XHJcbiAgICAgICAgdGhpcy5zaG93RGF0ZVBpY2tlciA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLmhpZGVTZWxlY01vbnRoQW5kWWVhckJsb2NrKCk7XHJcbiAgICAgICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUucmVzZXRJbmNvbXBsZXRlUmFuZ2VzKCk7XHJcbiAgICAgIH1cclxuICAgIH0sIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIG5nT25Jbml0KCkge1xyXG4gICAgLy8gdGhpcy5pbml0aWFsVmFsdWUgPSAhdGhpcy5wZXJzaWFuQ2hhciA/IE1kc0RhdGV0aW1lUGlja2VyVXRpbGl0eS50b0VuZ2xpc2hTdHJpbmcodGhpcy5pbml0aWFsVmFsdWUpIDogTWRzRGF0ZXRpbWVQaWNrZXJVdGlsaXR5LnRvUGVyc2lhbk51bWJlcih0aGlzLmluaXRpYWxWYWx1ZSk7XHJcbiAgICAvLyBpZiAodGhpcy5pbml0aWFsVmFsdWUgIT0gJycgJiYgdGhpcy5yYW5nZVNlbGVjdG9yKSB7XHJcbiAgICAvLyAgIGlmICh0aGlzLmlzUGVyc2lhbilcclxuICAgIC8vICAgICBNZHNEYXRldGltZVBpY2tlclV0aWxpdHkuZ2V0UGVyc2lhbkRhdGVSYW5nZXModGhpcy5pbml0aWFsVmFsdWUpO1xyXG4gICAgLy8gICBlbHNlXHJcbiAgICAvLyAgICAgTWRzRGF0ZXRpbWVQaWNrZXJVdGlsaXR5LmdldERhdGVSYW5nZXModGhpcy5pbml0aWFsVmFsdWUpO1xyXG4gICAgLy8gfVxyXG4gICAgLy8gdGhpcy5teUNvbnRyb2wuc2V0VmFsdWUodGhpcy5pbml0aWFsVmFsdWUpO1xyXG4gICAgaWYgKCF0aGlzLmlzUGVyc2lhbikgdGhpcy5wZXJzaWFuQ2hhciA9IGZhbHNlO1xyXG4gIH1cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICB0aGlzLmFmdGVyVmlld0luaXQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgQFZpZXdDaGlsZCgnbWRzRGF0ZVRpbWVQaWNrZXJDb3JlJykgcHJpdmF0ZSBtZHNEYXRlVGltZVBpY2tlckNvcmU6IE1kc0FuZ3VsYXJQZXJzaWFuRGF0ZVRpbWVQaWNrZXJDb3JlQ29tcG9uZW50O1xyXG5cclxuICAvLyNyZWdpb24gSW5wdXQgT3V0UHV0XHJcblxyXG5cclxuICAvKipcclxuICAgKiDYp9iyINio2YjYqiDYp9iz2KrYsdm+INin2LPYqtmB2KfYr9mHINi02YjYryDbjNinINmF2KrYsduM2KfZhFxyXG4gICAqIFRlbXBsYXRlVHlwZUVudW1cclxuICAgKi9cclxuICBASW5wdXQoKSB0ZW1wbGF0ZVR5cGU6IFRlbXBsYXRlVHlwZUVudW0gPSBUZW1wbGF0ZVR5cGVFbnVtLmJvb3RzdHJhcDtcclxuXHJcbiAgLyoqXHJcbiAgICog2YbZiNi5INmG2YXYp9uM2LQg2KraqdizINio2KfaqdizXHJcbiAgICogVGV4dEJveFR5cGVFbnVtXHJcbiAgICovXHJcbiAgQElucHV0KCkgdGV4dEJveFR5cGU6IFRleHRCb3hUeXBlRW51bSA9IFRleHRCb3hUeXBlRW51bS53aXRoQnV0dG9uO1xyXG4gIC8qKlxyXG4gICAqINmF2YLYr9in2LEg2KfZiNmE24zZh1xyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGluaXRpYWxWYWx1ZSA9ICcnO1xyXG4gIC8qKlxyXG4gICAqINmG2YjYuSDZhtmF2KfbjNi0INiv24zYqiDZvtuM2qnYsSDYqNmHINi12YjYsdiqINin24zZhiDZhNin24zZhiDYqNin2LTYryDbjNinINmG2YdcclxuICAgKi9cclxuICBASW5wdXQoKSBpbkxpbmUgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqINii24zYpyDYp9iyINqp2KfYsdin2qnYqtix2YfYp9uMINmB2KfYsdiz24wg2KfYs9iq2YHYp9iv2Ycg2LTZiNivXHJcbiAgICog2YjZgtiq24wg2KrZgtmI24zZhSDZhduM2YTYp9iv24wg2KfYs9iqINio2K/ZiNmGINiq2KfYq9uM2LEg2YXbjCDYtNmI2K9cclxuICAgKi9cclxuICBASW5wdXQoKSBwZXJzaWFuQ2hhciA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICog2KLbjNinINiv24zYqiDZvtuM2qnYsSDYqNmHINi02qnZhCDYp9mG2KrYrtin2Kgg2LHZhtisINiq2KfYsduM2K7bjCDYqNin2LTYryDbjNinINmG2YdcclxuICAgKi9cclxuICBASW5wdXQoKSByYW5nZVNlbGVjdG9yID0gZmFsc2U7XHJcbiAgLyoqXHJcbiAgICog2KrZgtmI24zZhSDZhduM2YTYp9iv24wg2KjYp9i02K8g24zYpyDYtNmF2LPbjFxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGlzUGVyc2lhbiA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICog2KLbjNinINiq2KfbjNmFINm+24zaqdixINmG2YXYp9uM2LQg2K/Yp9iv2Ycg2KjYtNmI2K8g24zYpyDZhtmHXHJcbiAgICog2K/YsSDZhtmI2Lkg2KfZhtiq2K7Yp9ioINix2YbYrCDYqtin2LHbjNiu24wg2KjYr9mI2YYg2KrYp9ir24zYsSDYp9iz2KpcclxuICAgKi9cclxuICBASW5wdXQoKSB0aW1lUGlja2VyID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiBQbGFjZUhvbGRlclxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHBsYWNlSG9sZGVyID0gJyc7XHJcbiAgLyoqXHJcbiAgICog2KLbjNqp2YjZhlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGJ1dHRvbkljb24gPSAn7aC97bOFJztcclxuICAvKipcclxuICAgICog2YHYsdmF2Kog2b7bjNi0INmB2LHYtiAxMzkzLzA5LzE0ICAgMTM6NDk6NDAgXHJcbiAgICAqIHl5eXk6INiz2KfZhCDahtmH2KfYsSDYsdmC2YXbjCBcclxuICAgICogeXk6INiz2KfZhCDYr9mIINix2YLZhduMIFxyXG4gICAgKiBNTU1NOiDZhtin2YUg2YHYp9ix2LPbjCDZhdin2YcgXHJcbiAgICAqIE1NOiDYudiv2K8g2K/ZiCDYsdmC2YXbjCDZhdin2YcgXHJcbiAgICAqIE06INi52K/YryDbjNqpINix2YLZhduMINmF2KfZhyBcclxuICAgICogZGRkZDog2YbYp9mFINmB2KfYsdiz24wg2LHZiNiyINmH2YHYqtmHIFxyXG4gICAgKiBkZDog2LnYr9ivINiv2Ygg2LHZgtmF24wg2LHZiNiyINmF2KfZhyBcclxuICAgICogZDog2LnYr9ivINuM2qkg2LHZgtmF24wg2LHZiNiyINmF2KfZhyBcclxuICAgICogSEg6INiz2KfYudiqINiv2Ygg2LHZgtmF24wg2KjYpyDZgdix2YXYqiAwMCDYqtinIDI0IFxyXG4gICAgKiBIOiDYs9in2LnYqiDbjNqpINix2YLZhduMINio2Kcg2YHYsdmF2KogMCDYqtinIDI0IFxyXG4gICAgKiBoaDog2LPYp9i52Kog2K/ZiCDYsdmC2YXbjCDYqNinINmB2LHZhdiqIDAwINiq2KcgMTIgXHJcbiAgICAqIGg6INiz2KfYudiqINuM2qkg2LHZgtmF24wg2KjYpyDZgdix2YXYqiAwINiq2KcgMTIgXHJcbiAgICAqIG1tOiDYudiv2K8g2K/ZiCDYsdmC2YXbjCDYr9mC24zZgtmHIFxyXG4gICAgKiBtOiDYudiv2K8g24zaqSDYsdmC2YXbjCDYr9mC24zZgtmHIFxyXG4gICAgKiBzczog2KvYp9mG24zZhyDYr9mIINix2YLZhduMIFxyXG4gICAgKiBzOiDYq9in2YbbjNmHINuM2qkg2LHZgtmF24wgXHJcbiAgICAqIGZmZjog2YXbjNmE24wg2KvYp9mG24zZhyAzINix2YLZhduMIFxyXG4gICAgKiBmZjog2YXbjNmE24wg2KvYp9mG24zZhyAyINix2YLZhduMIFxyXG4gICAgKiBmOiDZhduM2YTbjCDYq9in2YbbjNmHINuM2qkg2LHZgtmF24wgXHJcbiAgICAqIHR0OiDYqC7YuCDbjNinINmCLti4IFxyXG4gICAgKiB0OiDYrdix2YEg2KfZiNmEINin2LIg2Kgu2Lgg24zYpyDZgi7YuCBcclxuICAgICoqL1xyXG4gIEBJbnB1dCgpIGZvcm1hdCA9ICcnO1xyXG5cclxuICAvKipcclxuICAgKiDZiNmC2KrbjCDYqtin2LHbjNiuINin2YbYqtiu2KfYqNuMINi52YjYtiDZhduMINi02YjYryDYp9uM2YYg2KfZiNmG2Kog2YHYsdin2K7ZiNin2YbbjCDZhduMINi02YjYr1xyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSBkYXRlQ2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8SU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckRhdGU+KCk7XHJcbiAgLyoqXHJcbiAgICog2YjZgtiq24wg2LHZhtisINiq2KfYsduM2K7bjCDYp9mG2KrYrtin2Kgg2LTYr9mHINi52YjYtiDZhduMINi02YjYryDYp9uM2YYg2KfZiNmG2Kog2YHYsdin2K7ZiNin2YbbjCDZhduMINi02YjYr1xyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSByYW5nZURhdGVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyUmFuZ2VEYXRlPigpO1xyXG4gIC8qKlxyXG4gICAqINmI2YLYqtuMINqp2YTbjNiv24wg2LHZiNuMINiq2qnYsyDYqNin2qnYsyDYp9mG2KrYrtin2Kgg2KrYp9ix24zYriDZgdi02LHYr9mHINmF24wg2LTZiNivINin24zZhiDYp9mI2YbYqiDZgdix2KfYrtmI2KfZhtuMINmF24wg2LTZiNivXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIHRleHRCb3hLZXlEb3duID0gbmV3IEV2ZW50RW1pdHRlcjxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRXZlbnRNb2RlbD4oKTtcclxuICAvKipcclxuICAgKiDZiNmC2KrbjCDYsdmI24wg2KraqdizINio2KfaqdizINin2YbYqtiu2KfYqCDYqtin2LHbjNiuINio2YTZiNixINmF24wg2LTZiNivINin24zZhiDYp9mI2YbYqiDZgdix2KfYrtmI2KfZhtuMINmF24wg2LTZiNivXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIHRleHRCb3hCbHVyID0gbmV3IEV2ZW50RW1pdHRlcjxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRXZlbnRNb2RlbD4oKTtcclxuICAvKipcclxuICAgKiDZiNmC2KrbjCDYsdmI24wg2KraqdizINio2KfaqdizINin2YbYqtiu2KfYqCDYqtin2LHbjNiuINmB2YjaqdmI2LMg2YXbjCDYtNmI2K8g2KfbjNmGINin2YjZhtiqINmB2LHYp9iu2YjYp9mG24wg2YXbjCDYtNmI2K9cclxuICAgKi9cclxuICBAT3V0cHV0KCkgdGV4dEJveEZvY3VzID0gbmV3IEV2ZW50RW1pdHRlcjxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRXZlbnRNb2RlbD4oKTtcclxuICAvKipcclxuICAgKiDZiNmC2KrbjCDYsdmI24wg2KraqdizINio2KfaqdizINin2YbYqtiu2KfYqCDYqtin2LHbjNiuINiq2LrbjNuM2LHbjCDYp9uM2KzYp9ivINmF24wg2LTZiNivINin24zZhiDYp9mI2YbYqiDZgdix2KfYrtmI2KfZhtuMINmF24wg2LTZiNivXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIHRleHRCb3hDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyPElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJFdmVudE1vZGVsPigpO1xyXG5cclxuICAvLyNlbmRyZWdpb25cclxuXHJcbiAgbXlDb250cm9sID0gbmV3IEZvcm1Db250cm9sKCk7XHJcbiAgcHJpdmF0ZSBhZnRlclZpZXdJbml0ID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBpbkNsZWFyRnVuY3Rpb24gPSBmYWxzZTtcclxuICBwcml2YXRlIHNob3dpbmdEYXRlVGltZVBpY2tlckxvY2tlZCA9IGZhbHNlO1xyXG4gIHNob3dEYXRlUGlja2VyID0gZmFsc2U7XHJcblxyXG4gIHByaXZhdGUgX3NlbGVjdGVkRGF0ZVRpbWU6IERhdGUgPSBudWxsO1xyXG4gIGdldCBzZWxlY3RlZERhdGVUaW1lKCk6IERhdGUge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbGVjdGVkRGF0ZVRpbWU7XHJcbiAgfVxyXG4gIHNldCBzZWxlY3RlZERhdGVUaW1lKHZhbHVlOiBEYXRlKSB7XHJcbiAgICBpZiAoIXRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlKSByZXR1cm47XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5zZXREYXRlVGltZUJ5RGF0ZSghdmFsdWUgPyBudWxsIDogbmV3IERhdGUodmFsdWUpKTtcclxuICAgICAgaWYgKHZhbHVlID09IG51bGwpXHJcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWREYXRlVGltZSA9IG51bGw7XHJcbiAgICAgIGVsc2VcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZERhdGVUaW1lID0gbmV3IERhdGUodmFsdWUpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF9zZWxlY3RlZERhdGVUaW1lUmFuZ2VzOiBEYXRlW10gPSBudWxsO1xyXG4gIGdldCBzZWxlY3RlZERhdGVUaW1lUmFuZ2VzKCk6IERhdGVbXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWREYXRlVGltZVJhbmdlcztcclxuICB9XHJcbiAgc2V0IHNlbGVjdGVkRGF0ZVRpbWVSYW5nZXModmFsdWVzOiBEYXRlW10pIHtcclxuICAgIGlmICghdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGlmICh2YWx1ZXMgPT0gbnVsbCB8fCB2YWx1ZXMubGVuZ3RoIDwgMikgcmV0dXJuO1xyXG4gICAgICB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5zZXREYXRlVGltZVJhbmdlc0J5RGF0ZShcclxuICAgICAgICB2YWx1ZXNbMF0gPT0gbnVsbCA/IG51bGwgOiBuZXcgRGF0ZSh2YWx1ZXNbMF0pLFxyXG4gICAgICAgIHZhbHVlc1sxXSA9PSBudWxsID8gbnVsbCA6IG5ldyBEYXRlKHZhbHVlc1sxXSkpO1xyXG4gICAgICB0aGlzLl9zZWxlY3RlZERhdGVUaW1lUmFuZ2VzID0gW3ZhbHVlc1swXSwgdmFsdWVzWzFdXTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRFdmVudE9iamVjdChldmVudDogYW55KTogSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckV2ZW50TW9kZWwge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZXZlbnRBcmdzOiBldmVudCxcclxuICAgICAgc2VsZWN0ZWREYXRlOiB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5nZXRTZWxlY3RlZERhdGUsXHJcbiAgICAgIHNlbGVjdGVkUmFuZ2VEYXRlczogdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuZ2V0U2VsZWN0ZWRSYW5nZURhdGVzXHJcbiAgICB9O1xyXG4gIH1cclxuICBwcml2YXRlIGdldFNlbGVjdGVkRGF0ZU9iamVjdCgpOiBJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZU1vZGVsIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlbGVjdGVkRGF0ZTogdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuZ2V0U2VsZWN0ZWREYXRlLFxyXG4gICAgICBzZWxlY3RlZFJhbmdlRGF0ZXM6IHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLmdldFNlbGVjdGVkUmFuZ2VEYXRlc1xyXG4gICAgfTtcclxuICB9XHJcbiAgc2hvd0RhdGVQaWNrZXJCdXR0b25DbGlja2VkKCkge1xyXG4gICAgdGhpcy5zaG93RGF0ZVBpY2tlciA9ICF0aGlzLnNob3dEYXRlUGlja2VyO1xyXG4gICAgaWYgKHRoaXMuc2hvd0RhdGVQaWNrZXIpIHtcclxuICAgICAgLy9jb25zdCByZWN0T2JqZWN0ID0gdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgIC8vdGhpcy50b3BPZmZzZXQgPSByZWN0T2JqZWN0LnRvcDtcclxuICAgICAgLy90aGlzLmxlZnRPZmZzZXQgPSByZWN0T2JqZWN0LmxlZnQ7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGRhdGVDaGFuZ2VkSGFuZGxlcihkYXRlOiBJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZSkge1xyXG4gICAgaWYgKCF0aGlzLmFmdGVyVmlld0luaXQpIHJldHVybjtcclxuICAgIHRoaXMuZGF0ZUNoYW5nZWQuZW1pdChkYXRlKTtcclxuICAgIGlmIChkYXRlICE9IG51bGwpIHtcclxuICAgICAgdGhpcy5teUNvbnRyb2wuc2V0VmFsdWUoZGF0ZS5mb3JtYXRTdHJpbmcpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZVRpbWUgPSBuZXcgRGF0ZShkYXRlLnV0Y0RhdGVUaW1lKTtcclxuICAgICAgaWYgKCF0aGlzLnNob3dpbmdEYXRlVGltZVBpY2tlckxvY2tlZClcclxuICAgICAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gZmFsc2U7XHJcbiAgICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHRoaXMuZ2V0U2VsZWN0ZWREYXRlT2JqZWN0KCkpO1xyXG4gICAgfVxyXG4gIH1cclxuICByYW5nZURhdGVDaGFuZ2VkSGFuZGxlcihyYW5nZURhdGU6IElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJSYW5nZURhdGUpIHtcclxuICAgIGlmICghdGhpcy5hZnRlclZpZXdJbml0KSByZXR1cm47XHJcbiAgICB0aGlzLm15Q29udHJvbC5zZXRWYWx1ZSgnJyk7XHJcbiAgICBpZiAocmFuZ2VEYXRlID09IG51bGwpIHtcclxuICAgICAgdGhpcy5yYW5nZURhdGVDaGFuZ2VkLmVtaXQocmFuZ2VEYXRlKTtcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVUaW1lUmFuZ2VzID0gW251bGwsIG51bGxdO1xyXG4gICAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh0aGlzLmdldFNlbGVjdGVkRGF0ZU9iamVjdCgpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHJhbmdlRGF0ZS5zdGFydERhdGUuZm9ybWF0U3RyaW5nICE9ICcnICYmIHJhbmdlRGF0ZS5lbmREYXRlLmZvcm1hdFN0cmluZyAhPSAnJylcclxuICAgICAgdGhpcy5teUNvbnRyb2wuc2V0VmFsdWUoYCR7cmFuZ2VEYXRlLnN0YXJ0RGF0ZS5mb3JtYXRTdHJpbmd9IC0gJHtyYW5nZURhdGUuZW5kRGF0ZS5mb3JtYXRTdHJpbmd9YCk7XHJcbiAgICB0aGlzLnJhbmdlRGF0ZUNoYW5nZWQuZW1pdChyYW5nZURhdGUpO1xyXG4gICAgaWYgKHJhbmdlRGF0ZS5zdGFydERhdGUuZm9ybWF0U3RyaW5nICE9ICcnICYmIHJhbmdlRGF0ZS5lbmREYXRlLmZvcm1hdFN0cmluZyAhPSAnJyAmJiAhdGhpcy5zaG93aW5nRGF0ZVRpbWVQaWNrZXJMb2NrZWQpXHJcbiAgICAgIHRoaXMuc2hvd0RhdGVQaWNrZXIgPSBmYWxzZTtcclxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVGltZVJhbmdlcyA9IFtyYW5nZURhdGUuc3RhcnREYXRlLnV0Y0RhdGVUaW1lLCByYW5nZURhdGUuZW5kRGF0ZS51dGNEYXRlVGltZV07XHJcbiAgICB0aGlzLnByb3BhZ2F0ZUNoYW5nZSh0aGlzLmdldFNlbGVjdGVkRGF0ZU9iamVjdCgpKTtcclxuICB9XHJcbiAgZGF0ZVRpbWVUZXh0Qm94T25Gb2N1c0hhbmRsZXIoZXZlbnQ6IGFueSkge1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5jbGljaygpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRlVGltZSAhPSBudWxsKVxyXG4gICAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLnNldERhdGVUaW1lQnlEYXRlKHRoaXMuc2VsZWN0ZWREYXRlVGltZSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICAgIHRoaXMuc2hvd0RhdGVQaWNrZXJCdXR0b25DbGlja2VkKCk7XHJcbiAgICB0aGlzLnRleHRCb3hGb2N1cy5lbWl0KHRoaXMuZ2V0RXZlbnRPYmplY3QoZXZlbnQpKTtcclxuICB9XHJcbiAgZGF0ZVRpbWVUZXh0Qm94T25CbHVySGFuZGxlcihldmVudDogYW55KTogdm9pZCB7XHJcbiAgICBsZXQgdmFsdWUgPSAhdGhpcy5teUNvbnRyb2wudmFsdWUgPyAnJyA6IHRoaXMubXlDb250cm9sLnZhbHVlLnRyaW0oKTtcclxuICAgIGlmICh0aGlzLnBlcnNpYW5DaGFyKVxyXG4gICAgICB2YWx1ZSA9IE1kc0RhdGV0aW1lUGlja2VyVXRpbGl0eS50b1BlcnNpYW5OdW1iZXIodmFsdWUpO1xyXG4gICAgZWxzZVxyXG4gICAgICB2YWx1ZSA9IE1kc0RhdGV0aW1lUGlja2VyVXRpbGl0eS50b0VuZ2xpc2hTdHJpbmcodmFsdWUpO1xyXG4gICAgbGV0IHRhcmdldEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICBpZiAoIXRhcmdldEVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLW1kcy1wZXJzaWFuLWRhdGV0aW1lcGlja2VyJykpIHtcclxuICAgICAgdGhpcy5zaG93aW5nRGF0ZVRpbWVQaWNrZXJMb2NrZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5zZXREYXRlVGltZUJ5U3RyaW5nKHZhbHVlKTtcclxuICAgICAgdGhpcy5zaG93aW5nRGF0ZVRpbWVQaWNrZXJMb2NrZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHRoaXMudGV4dEJveEJsdXIuZW1pdCh0aGlzLmdldEV2ZW50T2JqZWN0KGV2ZW50KSk7XHJcbiAgfVxyXG4gIGRhdGVUaW1lVGV4dEJveE9uS2V5RG93bkhhbmRsZXIoZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgaWYgKGV2ZW50LmtleUNvZGUgIT0gMTMpIHtcclxuICAgICAgdGhpcy50ZXh0Qm94S2V5RG93bi5lbWl0KHRoaXMuZ2V0RXZlbnRPYmplY3QoZXZlbnQpKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHZhbHVlID0gZXZlbnQudGFyZ2V0LnZhbHVlLnRyaW0oKTtcclxuICAgIGlmICghdmFsdWUpXHJcbiAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLmNsZWFyRGF0ZVRpbWVQaWNrZXIoKTtcclxuICAgIGVsc2VcclxuICAgICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuc2V0RGF0ZVRpbWVCeVN0cmluZyh2YWx1ZSk7XHJcbiAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gZmFsc2U7XHJcbiAgICB0aGlzLnRleHRCb3hLZXlEb3duLmVtaXQodGhpcy5nZXRFdmVudE9iamVjdChldmVudCkpO1xyXG4gIH1cclxuXHJcbiAgY2xlYXIoKSB7XHJcbiAgICBpZiAodGhpcy5pbkNsZWFyRnVuY3Rpb24gfHwgIXRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlKSByZXR1cm47XHJcbiAgICB0aGlzLmluQ2xlYXJGdW5jdGlvbiA9IHRydWU7XHJcbiAgICB0aGlzLm15Q29udHJvbC5zZXRWYWx1ZSgnJyk7XHJcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVRpbWUgPSBudWxsO1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGVUaW1lUmFuZ2VzID0gW251bGwsIG51bGxdO1xyXG5cclxuICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLmNsZWFyRGF0ZVRpbWVQaWNrZXIoKTtcclxuICAgIHRoaXMuaW5DbGVhckZ1bmN0aW9uID0gZmFsc2U7XHJcbiAgfVxyXG4gIHNldERhdGVUaW1lKGRhdGVUaW1lOiBEYXRlKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5zZXREYXRlVGltZUJ5RGF0ZShkYXRlVGltZSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9XHJcbiAgc2V0RGF0ZVRpbWVSYW5nZXMoc3RhcnREYXRlVGltZTogRGF0ZSwgZW5kRGF0ZVRpbWU6IERhdGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLnNldERhdGVUaW1lUmFuZ2VzQnlEYXRlKHN0YXJ0RGF0ZVRpbWUsIGVuZERhdGVUaW1lKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzaG93RGF0ZVRpbWVQaWNrZXIoKSB7XHJcbiAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gdHJ1ZTtcclxuICB9XHJcbiAgaGlkZURhdGVUaW1lUGlja2VyKCkge1xyXG4gICAgdGhpcy5zaG93RGF0ZVBpY2tlciA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgLy8jcmVnaW9uIENvbnRyb2xWYWx1ZUFjY2Vzc29yXHJcblxyXG4gIHByaXZhdGUgcHJvcGFnYXRlQ2hhbmdlOiBhbnkgPSAoKSA9PiB7IH07XHJcbiAgcHJpdmF0ZSB2YWxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZUZuOiBhbnkgPSAoKSA9PiB7IH07XHJcblxyXG4gIHdyaXRlVmFsdWUodmFsdWVNb2RlbDogSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckRhdGVNb2RlbCk6IHZvaWQge1xyXG4gICAgaWYgKCF2YWx1ZU1vZGVsIHx8ICghdmFsdWVNb2RlbC5zZWxlY3RlZERhdGUgJiYgIXZhbHVlTW9kZWwuc2VsZWN0ZWRSYW5nZURhdGVzKSkge1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnJhbmdlU2VsZWN0b3IgJiYgdmFsdWVNb2RlbC5zZWxlY3RlZFJhbmdlRGF0ZXMpXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlVGltZVJhbmdlcyA9IFt2YWx1ZU1vZGVsLnNlbGVjdGVkUmFuZ2VEYXRlcy5zdGFydERhdGUudXRjRGF0ZVRpbWUsIHZhbHVlTW9kZWwuc2VsZWN0ZWRSYW5nZURhdGVzLmVuZERhdGUudXRjRGF0ZVRpbWVdO1xyXG4gICAgZWxzZSBpZiAodmFsdWVNb2RlbC5zZWxlY3RlZERhdGUpXHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlVGltZSA9IHZhbHVlTW9kZWwuc2VsZWN0ZWREYXRlLnV0Y0RhdGVUaW1lO1xyXG4gIH1cclxuICByZWdpc3Rlck9uQ2hhbmdlKGZuOiBhbnkpOiB2b2lkIHtcclxuICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlID0gZm47XHJcbiAgfVxyXG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgfVxyXG4gIHNldERpc2FibGVkU3RhdGU/KGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgIC8vdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWRcclxuICAgIGlmIChpc0Rpc2FibGVkKVxyXG4gICAgICB0aGlzLm15Q29udHJvbC5kaXNhYmxlKCk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHRoaXMubXlDb250cm9sLmVuYWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgdmFsSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckRhdGUoYzogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy52YWxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZUZuKGMudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgLy8jZW5kcmVnaW9uXHJcbn0iXX0=