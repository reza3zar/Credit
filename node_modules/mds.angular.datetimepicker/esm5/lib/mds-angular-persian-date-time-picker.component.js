/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, forwardRef, Input, Output, ViewChild } from '@angular/core';
import { FormControl, NG_VALUE_ACCESSOR } from '@angular/forms';
import { TemplateTypeEnum, TextBoxTypeEnum } from './classes/enums';
import { MdsDatetimePickerUtility } from './classes/mds-datetime-picker.utility';
import { MdsAngularPersianDateTimePickerCoreComponent } from './core/mds-angular-persian-date-time-picker-core.component';
var MdsAngularPersianDateTimePickerComponent = /** @class */ (function () {
    function MdsAngularPersianDateTimePickerComponent(element) {
        var _this = this;
        this.element = element;
        //#region Input OutPut
        /**
         * ุงุฒ ุจูุช ุงุณุชุฑูพ ุงุณุชูุงุฏู ุดูุฏ ุง ูุชุฑุงู
         * TemplateTypeEnum
         */
        this.templateType = TemplateTypeEnum.bootstrap;
        /**
         * ููุน ููุงุด ุชฺฉุณ ุจุงฺฉุณ
         * TextBoxTypeEnum
         */
        this.textBoxType = TextBoxTypeEnum.withButton;
        /**
         * ููุฏุงุฑ ุงููู
         */
        this.initialValue = '';
        /**
         * ููุน ููุงุด ุฏุช ูพฺฉุฑ ุจู ุตูุฑุช ุงู ูุงู ุจุงุดุฏ ุง ูู
         */
        this.inLine = true;
        /**
         * ุขุง ุงุฒ ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ ุงุณุชูุงุฏู ุดูุฏ
         * ููุช ุชููู ููุงุฏ ุงุณุช ุจุฏูู ุชุงุซุฑ ู ุดูุฏ
         */
        this.persianChar = true;
        /**
         * ุขุง ุฏุช ูพฺฉุฑ ุจู ุดฺฉู ุงูุชุฎุงุจ ุฑูุฌ ุชุงุฑุฎ ุจุงุดุฏ ุง ูู
         */
        this.rangeSelector = false;
        /**
         * ุชููู ููุงุฏ ุจุงุดุฏ ุง ุดูุณ
         */
        this.isPersian = true;
        /**
         * ุขุง ุชุงู ูพฺฉุฑ ููุงุด ุฏุงุฏู ุจุดูุฏ ุง ูู
         * ุฏุฑ ููุน ุงูุชุฎุงุจ ุฑูุฌ ุชุงุฑุฎ ุจุฏูู ุชุงุซุฑ ุงุณุช
         */
        this.timePicker = true;
        /**
         * PlaceHolder
         */
        this.placeHolder = '';
        /**
         * ุขฺฉูู
         */
        this.buttonIcon = '๐';
        /**
          * ูุฑูุช ูพุด ูุฑุถ 1393/09/14   13:49:40
          * yyyy: ุณุงู ฺูุงุฑ ุฑูู
          * yy: ุณุงู ุฏู ุฑูู
          * MMMM: ูุงู ูุงุฑุณ ูุงู
          * MM: ุนุฏุฏ ุฏู ุฑูู ูุงู
          * M: ุนุฏุฏ ฺฉ ุฑูู ูุงู
          * dddd: ูุงู ูุงุฑุณ ุฑูุฒ ููุชู
          * dd: ุนุฏุฏ ุฏู ุฑูู ุฑูุฒ ูุงู
          * d: ุนุฏุฏ ฺฉ ุฑูู ุฑูุฒ ูุงู
          * HH: ุณุงุนุช ุฏู ุฑูู ุจุง ูุฑูุช 00 ุชุง 24
          * H: ุณุงุนุช ฺฉ ุฑูู ุจุง ูุฑูุช 0 ุชุง 24
          * hh: ุณุงุนุช ุฏู ุฑูู ุจุง ูุฑูุช 00 ุชุง 12
          * h: ุณุงุนุช ฺฉ ุฑูู ุจุง ูุฑูุช 0 ุชุง 12
          * mm: ุนุฏุฏ ุฏู ุฑูู ุฏููู
          * m: ุนุฏุฏ ฺฉ ุฑูู ุฏููู
          * ss: ุซุงูู ุฏู ุฑูู
          * s: ุซุงูู ฺฉ ุฑูู
          * fff: ูู ุซุงูู 3 ุฑูู
          * ff: ูู ุซุงูู 2 ุฑูู
          * f: ูู ุซุงูู ฺฉ ุฑูู
          * tt: ุจ.ุธ ุง ู.ุธ
          * t: ุญุฑู ุงูู ุงุฒ ุจ.ุธ ุง ู.ุธ
          **/
        this.format = '';
        /**
         * ููุช ุชุงุฑุฎ ุงูุชุฎุงุจ ุนูุถ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
         */
        this.dateChanged = new EventEmitter();
        /**
         * ููุช ุฑูุฌ ุชุงุฑุฎ ุงูุชุฎุงุจ ุดุฏู ุนูุถ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
         */
        this.rangeDateChanged = new EventEmitter();
        /**
         * ููุช ฺฉูุฏ ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ูุดุฑุฏู ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
         */
        this.textBoxKeyDown = new EventEmitter();
        /**
         * ููุช ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ุจููุฑ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
         */
        this.textBoxBlur = new EventEmitter();
        /**
         * ููุช ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ููฺฉูุณ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
         */
        this.textBoxFocus = new EventEmitter();
        /**
         * ููุช ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ุชุบุฑ ุงุฌุงุฏ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
         */
        this.textBoxChange = new EventEmitter();
        //#endregion
        this.myControl = new FormControl();
        this.afterViewInit = false;
        this.inClearFunction = false;
        this.showingDateTimePickerLocked = false;
        this.showDatePicker = false;
        this._selectedDateTime = null;
        this._selectedDateTimeRanges = null;
        //#region ControlValueAccessor
        this.propagateChange = function () { };
        this.valIMdsAngularDateTimePickerDateFn = function () { };
        /** @type {?} */
        var doc = document.getElementsByTagName('html')[0];
        doc.addEventListener('click', function (event) {
            /** @type {?} */
            var targetElement = (/** @type {?} */ (event.target));
            if (_this.showDatePicker && event.target &&
                _this.element.nativeElement !== event.target &&
                !_this.element.nativeElement.contains(event.target) &&
                !targetElement.hasAttribute('data-mds-persian-datetimepicker')) {
                _this.showDatePicker = false;
                _this.mdsDateTimePickerCore.hideSelecMonthAndYearBlock();
                _this.mdsDateTimePickerCore.resetIncompleteRanges();
            }
        }, false);
    }
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // this.initialValue = !this.persianChar ? MdsDatetimePickerUtility.toEnglishString(this.initialValue) : MdsDatetimePickerUtility.toPersianNumber(this.initialValue);
        // if (this.initialValue != '' && this.rangeSelector) {
        //   if (this.isPersian)
        //     MdsDatetimePickerUtility.getPersianDateRanges(this.initialValue);
        //   else
        //     MdsDatetimePickerUtility.getDateRanges(this.initialValue);
        // }
        // this.myControl.setValue(this.initialValue);
        if (!this.isPersian)
            this.persianChar = false;
    };
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        this.afterViewInit = true;
    };
    Object.defineProperty(MdsAngularPersianDateTimePickerComponent.prototype, "selectedDateTime", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedDateTime;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            if (!this.mdsDateTimePickerCore)
                return;
            try {
                this.mdsDateTimePickerCore.setDateTimeByDate(!value ? null : new Date(value));
                if (value == null)
                    this._selectedDateTime = null;
                else
                    this._selectedDateTime = new Date(value);
            }
            catch (e) {
                this.clear();
                console.error(e);
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MdsAngularPersianDateTimePickerComponent.prototype, "selectedDateTimeRanges", {
        get: /**
         * @return {?}
         */
        function () {
            return this._selectedDateTimeRanges;
        },
        set: /**
         * @param {?} values
         * @return {?}
         */
        function (values) {
            if (!this.mdsDateTimePickerCore)
                return;
            try {
                if (values == null || values.length < 2)
                    return;
                this.mdsDateTimePickerCore.setDateTimeRangesByDate(values[0] == null ? null : new Date(values[0]), values[1] == null ? null : new Date(values[1]));
                this._selectedDateTimeRanges = [values[0], values[1]];
            }
            catch (e) {
                this.clear();
                console.error(e);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} event
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.getEventObject = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        return {
            eventArgs: event,
            selectedDate: this.mdsDateTimePickerCore.getSelectedDate,
            selectedRangeDates: this.mdsDateTimePickerCore.getSelectedRangeDates
        };
    };
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.getSelectedDateObject = /**
     * @return {?}
     */
    function () {
        return {
            selectedDate: this.mdsDateTimePickerCore.getSelectedDate,
            selectedRangeDates: this.mdsDateTimePickerCore.getSelectedRangeDates
        };
    };
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.showDatePickerButtonClicked = /**
     * @return {?}
     */
    function () {
        this.showDatePicker = !this.showDatePicker;
        if (this.showDatePicker) {
            //const rectObject = this.element.nativeElement.getBoundingClientRect();
            //this.topOffset = rectObject.top;
            //this.leftOffset = rectObject.left;
        }
    };
    /**
     * @param {?} date
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.dateChangedHandler = /**
     * @param {?} date
     * @return {?}
     */
    function (date) {
        if (!this.afterViewInit)
            return;
        this.dateChanged.emit(date);
        if (date != null) {
            this.myControl.setValue(date.formatString);
            this.selectedDateTime = new Date(date.utcDateTime);
            if (!this.showingDateTimePickerLocked)
                this.showDatePicker = false;
            this.propagateChange(this.getSelectedDateObject());
        }
    };
    /**
     * @param {?} rangeDate
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.rangeDateChangedHandler = /**
     * @param {?} rangeDate
     * @return {?}
     */
    function (rangeDate) {
        if (!this.afterViewInit)
            return;
        this.myControl.setValue('');
        if (rangeDate == null) {
            this.rangeDateChanged.emit(rangeDate);
            this.selectedDateTimeRanges = [null, null];
            this.propagateChange(this.getSelectedDateObject());
            return;
        }
        if (rangeDate.startDate.formatString != '' && rangeDate.endDate.formatString != '')
            this.myControl.setValue(rangeDate.startDate.formatString + " - " + rangeDate.endDate.formatString);
        this.rangeDateChanged.emit(rangeDate);
        if (rangeDate.startDate.formatString != '' && rangeDate.endDate.formatString != '' && !this.showingDateTimePickerLocked)
            this.showDatePicker = false;
        this.selectedDateTimeRanges = [rangeDate.startDate.utcDateTime, rangeDate.endDate.utcDateTime];
        this.propagateChange(this.getSelectedDateObject());
    };
    /**
     * @param {?} event
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.dateTimeTextBoxOnFocusHandler = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        document.getElementsByTagName('html')[0].click();
        try {
            if (this.selectedDateTime != null)
                this.mdsDateTimePickerCore.setDateTimeByDate(this.selectedDateTime);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
        this.showDatePickerButtonClicked();
        this.textBoxFocus.emit(this.getEventObject(event));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.dateTimeTextBoxOnBlurHandler = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        /** @type {?} */
        var value = !this.myControl.value ? '' : this.myControl.value.trim();
        if (this.persianChar)
            value = MdsDatetimePickerUtility.toPersianNumber(value);
        else
            value = MdsDatetimePickerUtility.toEnglishString(value);
        /** @type {?} */
        var targetElement = (/** @type {?} */ (event.target));
        if (!targetElement.hasAttribute('data-mds-persian-datetimepicker')) {
            this.showingDateTimePickerLocked = true;
            this.mdsDateTimePickerCore.setDateTimeByString(value);
            this.showingDateTimePickerLocked = false;
        }
        this.textBoxBlur.emit(this.getEventObject(event));
    };
    /**
     * @param {?} event
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.dateTimeTextBoxOnKeyDownHandler = /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        if (event.keyCode != 13) {
            this.textBoxKeyDown.emit(this.getEventObject(event));
            return;
        }
        /** @type {?} */
        var value = event.target.value.trim();
        if (!value)
            this.mdsDateTimePickerCore.clearDateTimePicker();
        else
            this.mdsDateTimePickerCore.setDateTimeByString(value);
        this.showDatePicker = false;
        this.textBoxKeyDown.emit(this.getEventObject(event));
    };
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.clear = /**
     * @return {?}
     */
    function () {
        if (this.inClearFunction || !this.mdsDateTimePickerCore)
            return;
        this.inClearFunction = true;
        this.myControl.setValue('');
        this.selectedDateTime = null;
        this.selectedDateTimeRanges = [null, null];
        this.mdsDateTimePickerCore.clearDateTimePicker();
        this.inClearFunction = false;
    };
    /**
     * @param {?} dateTime
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.setDateTime = /**
     * @param {?} dateTime
     * @return {?}
     */
    function (dateTime) {
        try {
            this.mdsDateTimePickerCore.setDateTimeByDate(dateTime);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
    };
    /**
     * @param {?} startDateTime
     * @param {?} endDateTime
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.setDateTimeRanges = /**
     * @param {?} startDateTime
     * @param {?} endDateTime
     * @return {?}
     */
    function (startDateTime, endDateTime) {
        try {
            this.mdsDateTimePickerCore.setDateTimeRangesByDate(startDateTime, endDateTime);
        }
        catch (e) {
            this.clear();
            console.error(e);
        }
    };
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.showDateTimePicker = /**
     * @return {?}
     */
    function () {
        this.showDatePicker = true;
    };
    /**
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.hideDateTimePicker = /**
     * @return {?}
     */
    function () {
        this.showDatePicker = false;
    };
    /**
     * @param {?} valueModel
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.writeValue = /**
     * @param {?} valueModel
     * @return {?}
     */
    function (valueModel) {
        if (!valueModel || (!valueModel.selectedDate && !valueModel.selectedRangeDates)) {
            this.clear();
            return;
        }
        if (this.rangeSelector && valueModel.selectedRangeDates)
            this.selectedDateTimeRanges = [valueModel.selectedRangeDates.startDate.utcDateTime, valueModel.selectedRangeDates.endDate.utcDateTime];
        else if (valueModel.selectedDate)
            this.selectedDateTime = valueModel.selectedDate.utcDateTime;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.registerOnChange = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
        this.propagateChange = fn;
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.registerOnTouched = /**
     * @param {?} fn
     * @return {?}
     */
    function (fn) {
    };
    /**
     * @param {?} isDisabled
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.setDisabledState = /**
     * @param {?} isDisabled
     * @return {?}
     */
    function (isDisabled) {
        //this.disabled = isDisabled
        if (isDisabled)
            this.myControl.disable();
        else
            this.myControl.enable();
    };
    /**
     * @param {?} c
     * @return {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.valIMdsAngularDateTimePickerDate = /**
     * @param {?} c
     * @return {?}
     */
    function (c) {
        return this.valIMdsAngularDateTimePickerDateFn(c.value);
    };
    MdsAngularPersianDateTimePickerComponent.decorators = [
        { type: Component, args: [{
                    selector: 'mds-angular-persian-datetimepicker',
                    template: "<div *ngIf=\"inLine\" class=\"datepicker-box\">\r\n  <mds-datetime-picker-core *ngIf=\"inLine\" [initialValue]=\"initialValue\" [rangeSelector]=\"rangeSelector\" [persianChar]=\"persianChar\"\r\n    [isPersian]=\"isPersian\" [timePicker]=\"timePicker\" [format]=\"format\" [templateType]=\"templateType\" #mdsDateTimePickerCore\r\n    (dateChanged)=\"dateChangedHandler($event)\" (rangeDateChanged)=\"rangeDateChangedHandler($event)\">\r\n  </mds-datetime-picker-core>\r\n</div>\r\n\r\n<div *ngIf=\"!inLine && templateType == 2\" class=\"datepicker-container\">\r\n  <mat-form-field>\r\n    <input matInput type=\"text\" [placeholder]=\"placeHolder\" [formControl]=\"myControl\" (focus)=\"dateTimeTextBoxOnFocusHandler($event)\"\r\n      (blur)=\"dateTimeTextBoxOnBlurHandler($event)\" (keydown)=\"dateTimeTextBoxOnKeyDownHandler($event)\" data-mds-persian-datetimepicker>\r\n    <span matPrefix>\r\n      <span *ngIf=\"textBoxType == 1\" mat-button class=\"calendar-icon cursor-pointer\">\r\n        <span [innerHTML]=\"buttonIcon\"></span>\r\n      </span>\r\n    </span>\r\n  </mat-form-field>\r\n  <div class=\"datepicker\" [hidden]=\"!showDatePicker\">\r\n    <mds-datetime-picker-core #mdsDateTimePickerCore [initialValue]=\"initialValue\" [rangeSelector]=\"rangeSelector\" [persianChar]=\"persianChar\"\r\n      [isPersian]=\"isPersian\" [timePicker]=\"timePicker\" [format]=\"format\" [templateType]=\"2\" (dateChanged)=\"dateChangedHandler($event)\"\r\n      (rangeDateChanged)=\"rangeDateChangedHandler($event)\">\r\n    </mds-datetime-picker-core>\r\n  </div>\r\n</div>\r\n\r\n<div *ngIf=\"!inLine && templateType == 1\" class=\"datepicker-container\">\r\n  <div class=\"input-group\" *ngIf=\"textBoxType == 1\">\r\n    <div class=\"input-group-prepend cursor-pointer calendar-icon\" (click)=\"showDatePickerButtonClicked()\">\r\n      <span class=\"input-group-text\" [innerHTML]=\"buttonIcon\"></span>\r\n    </div>\r\n    <input type=\"text\" class=\"form-control\" [placeholder]=\"placeHolder\" [formControl]=\"myControl\" (focus)=\"dateTimeTextBoxOnFocusHandler($event)\"\r\n      (blur)=\"dateTimeTextBoxOnBlurHandler($event)\" (keydown)=\"dateTimeTextBoxOnKeyDownHandler($event)\" data-mds-persian-datetimepicker>\r\n  </div>\r\n  <input type=\"text\" *ngIf=\"textBoxType == 2\" [placeholder]=\"placeHolder\" class=\"form-control\" [formControl]=\"myControl\" (focus)=\"dateTimeTextBoxOnFocusHandler($event)\"\r\n    (blur)=\"dateTimeTextBoxOnBlurHandler($event)\" (keydown)=\"dateTimeTextBoxOnKeyDownHandler($event)\" data-mds-persian-datetimepicker>\r\n  <div class=\"datepicker datepicker-bootstrap\" [hidden]=\"!showDatePicker\">\r\n    <mds-datetime-picker-core #mdsDateTimePickerCore [initialValue]=\"initialValue\" [rangeSelector]=\"rangeSelector\" [persianChar]=\"persianChar\"\r\n      [isPersian]=\"isPersian\" [timePicker]=\"timePicker\" [format]=\"format\" [templateType]=\"1\" (dateChanged)=\"dateChangedHandler($event)\"\r\n      (rangeDateChanged)=\"rangeDateChangedHandler($event)\">\r\n    </mds-datetime-picker-core>\r\n  </div>\r\n</div>",
                    providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(function () { return MdsAngularPersianDateTimePickerComponent; }),
                            multi: true
                        }
                    ],
                    styles: [".datepicker-container{position:relative;direction:ltr}.datepicker{background:#fff;position:absolute;z-index:999999;top:53px;left:0;min-width:300px;border:1px solid #f7f7f7;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.datepicker-bootstrap{top:34px}.hidden{display:none}.cursor-pointer{cursor:pointer}.datepicker-box{border:1px solid #ccc;position:relative}.mat-form-field{width:100%}.calendar-icon{font-size:18px}.calendar-icon[mat-button]{margin-right:6px;float:left}"]
                }] }
    ];
    MdsAngularPersianDateTimePickerComponent.ctorParameters = function () { return [
        { type: ElementRef }
    ]; };
    MdsAngularPersianDateTimePickerComponent.propDecorators = {
        mdsDateTimePickerCore: [{ type: ViewChild, args: ['mdsDateTimePickerCore',] }],
        templateType: [{ type: Input }],
        textBoxType: [{ type: Input }],
        initialValue: [{ type: Input }],
        inLine: [{ type: Input }],
        persianChar: [{ type: Input }],
        rangeSelector: [{ type: Input }],
        isPersian: [{ type: Input }],
        timePicker: [{ type: Input }],
        placeHolder: [{ type: Input }],
        buttonIcon: [{ type: Input }],
        format: [{ type: Input }],
        dateChanged: [{ type: Output }],
        rangeDateChanged: [{ type: Output }],
        textBoxKeyDown: [{ type: Output }],
        textBoxBlur: [{ type: Output }],
        textBoxFocus: [{ type: Output }],
        textBoxChange: [{ type: Output }]
    };
    return MdsAngularPersianDateTimePickerComponent;
}());
export { MdsAngularPersianDateTimePickerComponent };
if (false) {
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.mdsDateTimePickerCore;
    /**
     * ุงุฒ ุจูุช ุงุณุชุฑูพ ุงุณุชูุงุฏู ุดูุฏ ุง ูุชุฑุงู
     * TemplateTypeEnum
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.templateType;
    /**
     * ููุน ููุงุด ุชฺฉุณ ุจุงฺฉุณ
     * TextBoxTypeEnum
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxType;
    /**
     * ููุฏุงุฑ ุงููู
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.initialValue;
    /**
     * ููุน ููุงุด ุฏุช ูพฺฉุฑ ุจู ุตูุฑุช ุงู ูุงู ุจุงุดุฏ ุง ูู
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.inLine;
    /**
     * ุขุง ุงุฒ ฺฉุงุฑุงฺฉุชุฑูุง ูุงุฑุณ ุงุณุชูุงุฏู ุดูุฏ
     * ููุช ุชููู ููุงุฏ ุงุณุช ุจุฏูู ุชุงุซุฑ ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.persianChar;
    /**
     * ุขุง ุฏุช ูพฺฉุฑ ุจู ุดฺฉู ุงูุชุฎุงุจ ุฑูุฌ ุชุงุฑุฎ ุจุงุดุฏ ุง ูู
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.rangeSelector;
    /**
     * ุชููู ููุงุฏ ุจุงุดุฏ ุง ุดูุณ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.isPersian;
    /**
     * ุขุง ุชุงู ูพฺฉุฑ ููุงุด ุฏุงุฏู ุจุดูุฏ ุง ูู
     * ุฏุฑ ููุน ุงูุชุฎุงุจ ุฑูุฌ ุชุงุฑุฎ ุจุฏูู ุชุงุซุฑ ุงุณุช
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.timePicker;
    /**
     * PlaceHolder
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.placeHolder;
    /**
     * ุขฺฉูู
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.buttonIcon;
    /**
     * ูุฑูุช ูพุด ูุฑุถ 1393/09/14   13:49:40
     * yyyy: ุณุงู ฺูุงุฑ ุฑูู
     * yy: ุณุงู ุฏู ุฑูู
     * MMMM: ูุงู ูุงุฑุณ ูุงู
     * MM: ุนุฏุฏ ุฏู ุฑูู ูุงู
     * M: ุนุฏุฏ ฺฉ ุฑูู ูุงู
     * dddd: ูุงู ูุงุฑุณ ุฑูุฒ ููุชู
     * dd: ุนุฏุฏ ุฏู ุฑูู ุฑูุฒ ูุงู
     * d: ุนุฏุฏ ฺฉ ุฑูู ุฑูุฒ ูุงู
     * HH: ุณุงุนุช ุฏู ุฑูู ุจุง ูุฑูุช 00 ุชุง 24
     * H: ุณุงุนุช ฺฉ ุฑูู ุจุง ูุฑูุช 0 ุชุง 24
     * hh: ุณุงุนุช ุฏู ุฑูู ุจุง ูุฑูุช 00 ุชุง 12
     * h: ุณุงุนุช ฺฉ ุฑูู ุจุง ูุฑูุช 0 ุชุง 12
     * mm: ุนุฏุฏ ุฏู ุฑูู ุฏููู
     * m: ุนุฏุฏ ฺฉ ุฑูู ุฏููู
     * ss: ุซุงูู ุฏู ุฑูู
     * s: ุซุงูู ฺฉ ุฑูู
     * fff: ูู ุซุงูู 3 ุฑูู
     * ff: ูู ุซุงูู 2 ุฑูู
     * f: ูู ุซุงูู ฺฉ ุฑูู
     * tt: ุจ.ุธ ุง ู.ุธ
     * t: ุญุฑู ุงูู ุงุฒ ุจ.ุธ ุง ู.ุธ
     *
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.format;
    /**
     * ููุช ุชุงุฑุฎ ุงูุชุฎุงุจ ุนูุถ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.dateChanged;
    /**
     * ููุช ุฑูุฌ ุชุงุฑุฎ ุงูุชุฎุงุจ ุดุฏู ุนูุถ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.rangeDateChanged;
    /**
     * ููุช ฺฉูุฏ ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ูุดุฑุฏู ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxKeyDown;
    /**
     * ููุช ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ุจููุฑ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxBlur;
    /**
     * ููุช ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ููฺฉูุณ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxFocus;
    /**
     * ููุช ุฑู ุชฺฉุณ ุจุงฺฉุณ ุงูุชุฎุงุจ ุชุงุฑุฎ ุชุบุฑ ุงุฌุงุฏ ู ุดูุฏ ุงู ุงููุช ูุฑุงุฎูุงู ู ุดูุฏ
     * @type {?}
     */
    MdsAngularPersianDateTimePickerComponent.prototype.textBoxChange;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.myControl;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.afterViewInit;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.inClearFunction;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.showingDateTimePickerLocked;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.showDatePicker;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype._selectedDateTime;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype._selectedDateTimeRanges;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.propagateChange;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.valIMdsAngularDateTimePickerDateFn;
    /** @type {?} */
    MdsAngularPersianDateTimePickerComponent.prototype.element;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWRzLWFuZ3VsYXItcGVyc2lhbi1kYXRlLXRpbWUtcGlja2VyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL21kcy5hbmd1bGFyLmRhdGV0aW1lcGlja2VyLyIsInNvdXJjZXMiOlsibGliL21kcy1hbmd1bGFyLXBlcnNpYW4tZGF0ZS10aW1lLXBpY2tlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBaUIsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ2pJLE9BQU8sRUFBd0IsV0FBVyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFdEYsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRXBFLE9BQU8sRUFBRSx3QkFBd0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBQ2pGLE9BQU8sRUFBRSw0Q0FBNEMsRUFBRSxNQUFNLDREQUE0RCxDQUFDO0FBSTFIO0lBZUUsa0RBQW9CLE9BQW1CO1FBQXZDLGlCQWFDO1FBYm1CLFlBQU8sR0FBUCxPQUFPLENBQVk7UUFnQ3ZDLHNCQUFzQjtRQUd0Qjs7O1dBR0c7UUFDTSxpQkFBWSxHQUFxQixnQkFBZ0IsQ0FBQyxTQUFTLENBQUM7UUFFckU7OztXQUdHO1FBQ00sZ0JBQVcsR0FBb0IsZUFBZSxDQUFDLFVBQVUsQ0FBQztRQUNuRTs7V0FFRztRQUNNLGlCQUFZLEdBQUcsRUFBRSxDQUFDO1FBQzNCOztXQUVHO1FBQ00sV0FBTSxHQUFHLElBQUksQ0FBQztRQUN2Qjs7O1dBR0c7UUFDTSxnQkFBVyxHQUFHLElBQUksQ0FBQztRQUM1Qjs7V0FFRztRQUNNLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBQy9COztXQUVHO1FBQ00sY0FBUyxHQUFHLElBQUksQ0FBQztRQUMxQjs7O1dBR0c7UUFD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QkFJTixNQUFNO2dDQUlOLE1BQU07O0lBME1ULCtDQUFDO0NBQUEsQUExVkQsSUEwVkM7U0E3VVksd0NBQXdDOzs7SUFnQ25ELHlFQUFnSDs7Ozs7O0lBU2hILGdFQUFxRTs7Ozs7O0lBTXJFLCtEQUFtRTs7Ozs7SUFJbkUsZ0VBQTJCOzs7OztJQUkzQiwwREFBdUI7Ozs7OztJQUt2QiwrREFBNEI7Ozs7O0lBSTVCLGlFQUErQjs7Ozs7SUFJL0IsNkRBQTBCOzs7Ozs7SUFLMUIsOERBQTJCOzs7OztJQUkzQiwrREFBMEI7Ozs7O0lBSTFCLDhEQUEyQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBeUIzQiwwREFBcUI7Ozs7O0lBS3JCLCtEQUEwRTs7Ozs7SUFJMUUsb0VBQW9GOzs7OztJQUlwRixrRUFBbUY7Ozs7O0lBSW5GLCtEQUFnRjs7Ozs7SUFJaEYsZ0VBQWlGOzs7OztJQUlqRixpRUFBa0Y7O0lBSWxGLDZEQUE4Qjs7SUFDOUIsaUVBQThCOztJQUM5QixtRUFBZ0M7O0lBQ2hDLCtFQUE0Qzs7SUFDNUMsa0VBQXVCOztJQUV2QixxRUFBdUM7O0lBa0J2QywyRUFBK0M7O0lBOEkvQyxtRUFBeUM7O0lBQ3pDLHNGQUE0RDs7SUE1U2hELDJEQUEyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFmdGVyVmlld0luaXQsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBDb250cm9sVmFsdWVBY2Nlc3NvciwgRm9ybUNvbnRyb2wsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQgeyBNZHMgfSBmcm9tICdtZHMucGVyc2lhbi5kYXRldGltZSc7XHJcbmltcG9ydCB7IFRlbXBsYXRlVHlwZUVudW0sIFRleHRCb3hUeXBlRW51bSB9IGZyb20gJy4vY2xhc3Nlcy9lbnVtcyc7XHJcbmltcG9ydCB7IElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJEYXRlLCBJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRXZlbnRNb2RlbCwgSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlclJhbmdlRGF0ZSwgSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckRhdGVNb2RlbCB9IGZyb20gJy4vY2xhc3Nlcy9pbnRlcmZhY2VzJztcclxuaW1wb3J0IHsgTWRzRGF0ZXRpbWVQaWNrZXJVdGlsaXR5IH0gZnJvbSAnLi9jbGFzc2VzL21kcy1kYXRldGltZS1waWNrZXIudXRpbGl0eSc7XHJcbmltcG9ydCB7IE1kc0FuZ3VsYXJQZXJzaWFuRGF0ZVRpbWVQaWNrZXJDb3JlQ29tcG9uZW50IH0gZnJvbSAnLi9jb3JlL21kcy1hbmd1bGFyLXBlcnNpYW4tZGF0ZS10aW1lLXBpY2tlci1jb3JlLmNvbXBvbmVudCc7XHJcbmltcG9ydCBQZXJzaWFuRGF0ZVRpbWUgPSBNZHMuUGVyc2lhbkRhdGVUaW1lO1xyXG5cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnbWRzLWFuZ3VsYXItcGVyc2lhbi1kYXRldGltZXBpY2tlcicsXHJcbiAgdGVtcGxhdGVVcmw6ICcuL21kcy1hbmd1bGFyLXBlcnNpYW4tZGF0ZS10aW1lLXBpY2tlci5jb21wb25lbnQuaHRtbCcsXHJcbiAgc3R5bGVVcmxzOiBbJy4vbWRzLWFuZ3VsYXItcGVyc2lhbi1kYXRlLXRpbWUtcGlja2VyLmNvbXBvbmVudC5jc3MnXSxcclxuICBwcm92aWRlcnM6XHJcbiAgICBbXHJcbiAgICAgIHtcclxuICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcclxuICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBNZHNBbmd1bGFyUGVyc2lhbkRhdGVUaW1lUGlja2VyQ29tcG9uZW50KSxcclxuICAgICAgICBtdWx0aTogdHJ1ZVxyXG4gICAgICB9XHJcbiAgICBdXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBNZHNBbmd1bGFyUGVyc2lhbkRhdGVUaW1lUGlja2VyQ29tcG9uZW50IGltcGxlbWVudHMgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogRWxlbWVudFJlZikge1xyXG4gICAgY29uc3QgZG9jID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXTtcclxuICAgIGRvYy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xyXG4gICAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgaWYgKHRoaXMuc2hvd0RhdGVQaWNrZXIgJiYgZXZlbnQudGFyZ2V0ICYmXHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQgIT09IGV2ZW50LnRhcmdldCAmJlxyXG4gICAgICAgICF0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5jb250YWlucyhldmVudC50YXJnZXQpICYmXHJcbiAgICAgICAgIXRhcmdldEVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLW1kcy1wZXJzaWFuLWRhdGV0aW1lcGlja2VyJykpIHtcclxuICAgICAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuaGlkZVNlbGVjTW9udGhBbmRZZWFyQmxvY2soKTtcclxuICAgICAgICB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5yZXNldEluY29tcGxldGVSYW5nZXMoKTtcclxuICAgICAgfVxyXG4gICAgfSwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICAvLyB0aGlzLmluaXRpYWxWYWx1ZSA9ICF0aGlzLnBlcnNpYW5DaGFyID8gTWRzRGF0ZXRpbWVQaWNrZXJVdGlsaXR5LnRvRW5nbGlzaFN0cmluZyh0aGlzLmluaXRpYWxWYWx1ZSkgOiBNZHNEYXRldGltZVBpY2tlclV0aWxpdHkudG9QZXJzaWFuTnVtYmVyKHRoaXMuaW5pdGlhbFZhbHVlKTtcclxuICAgIC8vIGlmICh0aGlzLmluaXRpYWxWYWx1ZSAhPSAnJyAmJiB0aGlzLnJhbmdlU2VsZWN0b3IpIHtcclxuICAgIC8vICAgaWYgKHRoaXMuaXNQZXJzaWFuKVxyXG4gICAgLy8gICAgIE1kc0RhdGV0aW1lUGlja2VyVXRpbGl0eS5nZXRQZXJzaWFuRGF0ZVJhbmdlcyh0aGlzLmluaXRpYWxWYWx1ZSk7XHJcbiAgICAvLyAgIGVsc2VcclxuICAgIC8vICAgICBNZHNEYXRldGltZVBpY2tlclV0aWxpdHkuZ2V0RGF0ZVJhbmdlcyh0aGlzLmluaXRpYWxWYWx1ZSk7XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0aGlzLm15Q29udHJvbC5zZXRWYWx1ZSh0aGlzLmluaXRpYWxWYWx1ZSk7XHJcbiAgICBpZiAoIXRoaXMuaXNQZXJzaWFuKSB0aGlzLnBlcnNpYW5DaGFyID0gZmFsc2U7XHJcbiAgfVxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIHRoaXMuYWZ0ZXJWaWV3SW5pdCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBAVmlld0NoaWxkKCdtZHNEYXRlVGltZVBpY2tlckNvcmUnKSBwcml2YXRlIG1kc0RhdGVUaW1lUGlja2VyQ29yZTogTWRzQW5ndWxhclBlcnNpYW5EYXRlVGltZVBpY2tlckNvcmVDb21wb25lbnQ7XHJcblxyXG4gIC8vI3JlZ2lvbiBJbnB1dCBPdXRQdXRcclxuXHJcblxyXG4gIC8qKlxyXG4gICAqINin2LIg2KjZiNiqINin2LPYqtix2b4g2KfYs9iq2YHYp9iv2Ycg2LTZiNivINuM2Kcg2YXYqtix24zYp9mEXHJcbiAgICogVGVtcGxhdGVUeXBlRW51bVxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHRlbXBsYXRlVHlwZTogVGVtcGxhdGVUeXBlRW51bSA9IFRlbXBsYXRlVHlwZUVudW0uYm9vdHN0cmFwO1xyXG5cclxuICAvKipcclxuICAgKiDZhtmI2Lkg2YbZhdin24zYtCDYqtqp2LMg2KjYp9qp2LNcclxuICAgKiBUZXh0Qm94VHlwZUVudW1cclxuICAgKi9cclxuICBASW5wdXQoKSB0ZXh0Qm94VHlwZTogVGV4dEJveFR5cGVFbnVtID0gVGV4dEJveFR5cGVFbnVtLndpdGhCdXR0b247XHJcbiAgLyoqXHJcbiAgICog2YXZgtiv2KfYsSDYp9mI2YTbjNmHXHJcbiAgICovXHJcbiAgQElucHV0KCkgaW5pdGlhbFZhbHVlID0gJyc7XHJcbiAgLyoqXHJcbiAgICog2YbZiNi5INmG2YXYp9uM2LQg2K/bjNiqINm+24zaqdixINio2Ycg2LXZiNix2Kog2KfbjNmGINmE2KfbjNmGINio2KfYtNivINuM2Kcg2YbZh1xyXG4gICAqL1xyXG4gIEBJbnB1dCgpIGluTGluZSA9IHRydWU7XHJcbiAgLyoqXHJcbiAgICog2KLbjNinINin2LIg2qnYp9ix2Kfaqdiq2LHZh9in24wg2YHYp9ix2LPbjCDYp9iz2KrZgdin2K/ZhyDYtNmI2K9cclxuICAgKiDZiNmC2KrbjCDYqtmC2YjbjNmFINmF24zZhNin2K/bjCDYp9iz2Kog2KjYr9mI2YYg2KrYp9ir24zYsSDZhduMINi02YjYr1xyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHBlcnNpYW5DaGFyID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiDYotuM2Kcg2K/bjNiqINm+24zaqdixINio2Ycg2LTaqdmEINin2YbYqtiu2KfYqCDYsdmG2Kwg2KrYp9ix24zYrtuMINio2KfYtNivINuM2Kcg2YbZh1xyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHJhbmdlU2VsZWN0b3IgPSBmYWxzZTtcclxuICAvKipcclxuICAgKiDYqtmC2YjbjNmFINmF24zZhNin2K/bjCDYqNin2LTYryDbjNinINi02YXYs9uMXHJcbiAgICovXHJcbiAgQElucHV0KCkgaXNQZXJzaWFuID0gdHJ1ZTtcclxuICAvKipcclxuICAgKiDYotuM2Kcg2KrYp9uM2YUg2b7bjNqp2LEg2YbZhdin24zYtCDYr9in2K/ZhyDYqNi02YjYryDbjNinINmG2YdcclxuICAgKiDYr9ixINmG2YjYuSDYp9mG2KrYrtin2Kgg2LHZhtisINiq2KfYsduM2K7bjCDYqNiv2YjZhiDYqtin2KvbjNixINin2LPYqlxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHRpbWVQaWNrZXIgPSB0cnVlO1xyXG4gIC8qKlxyXG4gICAqIFBsYWNlSG9sZGVyXHJcbiAgICovXHJcbiAgQElucHV0KCkgcGxhY2VIb2xkZXIgPSAnJztcclxuICAvKipcclxuICAgKiDYotuM2qnZiNmGXHJcbiAgICovXHJcbiAgQElucHV0KCkgYnV0dG9uSWNvbiA9ICftoL3ts4UnO1xyXG4gIC8qKlxyXG4gICAgKiDZgdix2YXYqiDZvtuM2LQg2YHYsdi2IDEzOTMvMDkvMTQgICAxMzo0OTo0MCBcclxuICAgICogeXl5eTog2LPYp9mEINqG2YfYp9ixINix2YLZhduMIFxyXG4gICAgKiB5eTog2LPYp9mEINiv2Ygg2LHZgtmF24wgXHJcbiAgICAqIE1NTU06INmG2KfZhSDZgdin2LHYs9uMINmF2KfZhyBcclxuICAgICogTU06INi52K/YryDYr9mIINix2YLZhduMINmF2KfZhyBcclxuICAgICogTTog2LnYr9ivINuM2qkg2LHZgtmF24wg2YXYp9mHIFxyXG4gICAgKiBkZGRkOiDZhtin2YUg2YHYp9ix2LPbjCDYsdmI2LIg2YfZgdiq2YcgXHJcbiAgICAqIGRkOiDYudiv2K8g2K/ZiCDYsdmC2YXbjCDYsdmI2LIg2YXYp9mHIFxyXG4gICAgKiBkOiDYudiv2K8g24zaqSDYsdmC2YXbjCDYsdmI2LIg2YXYp9mHIFxyXG4gICAgKiBISDog2LPYp9i52Kog2K/ZiCDYsdmC2YXbjCDYqNinINmB2LHZhdiqIDAwINiq2KcgMjQgXHJcbiAgICAqIEg6INiz2KfYudiqINuM2qkg2LHZgtmF24wg2KjYpyDZgdix2YXYqiAwINiq2KcgMjQgXHJcbiAgICAqIGhoOiDYs9in2LnYqiDYr9mIINix2YLZhduMINio2Kcg2YHYsdmF2KogMDAg2KrYpyAxMiBcclxuICAgICogaDog2LPYp9i52Kog24zaqSDYsdmC2YXbjCDYqNinINmB2LHZhdiqIDAg2KrYpyAxMiBcclxuICAgICogbW06INi52K/YryDYr9mIINix2YLZhduMINiv2YLbjNmC2YcgXHJcbiAgICAqIG06INi52K/YryDbjNqpINix2YLZhduMINiv2YLbjNmC2YcgXHJcbiAgICAqIHNzOiDYq9in2YbbjNmHINiv2Ygg2LHZgtmF24wgXHJcbiAgICAqIHM6INir2KfZhtuM2Ycg24zaqSDYsdmC2YXbjCBcclxuICAgICogZmZmOiDZhduM2YTbjCDYq9in2YbbjNmHIDMg2LHZgtmF24wgXHJcbiAgICAqIGZmOiDZhduM2YTbjCDYq9in2YbbjNmHIDIg2LHZgtmF24wgXHJcbiAgICAqIGY6INmF24zZhNuMINir2KfZhtuM2Ycg24zaqSDYsdmC2YXbjCBcclxuICAgICogdHQ6INioLti4INuM2Kcg2YIu2LggXHJcbiAgICAqIHQ6INit2LHZgSDYp9mI2YQg2KfYsiDYqC7YuCDbjNinINmCLti4IFxyXG4gICAgKiovXHJcbiAgQElucHV0KCkgZm9ybWF0ID0gJyc7XHJcblxyXG4gIC8qKlxyXG4gICAqINmI2YLYqtuMINiq2KfYsduM2K4g2KfZhtiq2K7Yp9io24wg2LnZiNi2INmF24wg2LTZiNivINin24zZhiDYp9mI2YbYqiDZgdix2KfYrtmI2KfZhtuMINmF24wg2LTZiNivXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIGRhdGVDaGFuZ2VkID0gbmV3IEV2ZW50RW1pdHRlcjxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZT4oKTtcclxuICAvKipcclxuICAgKiDZiNmC2KrbjCDYsdmG2Kwg2KrYp9ix24zYrtuMINin2YbYqtiu2KfYqCDYtNiv2Ycg2LnZiNi2INmF24wg2LTZiNivINin24zZhiDYp9mI2YbYqiDZgdix2KfYrtmI2KfZhtuMINmF24wg2LTZiNivXHJcbiAgICovXHJcbiAgQE91dHB1dCgpIHJhbmdlRGF0ZUNoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJSYW5nZURhdGU+KCk7XHJcbiAgLyoqXHJcbiAgICog2YjZgtiq24wg2qnZhNuM2K/bjCDYsdmI24wg2KraqdizINio2KfaqdizINin2YbYqtiu2KfYqCDYqtin2LHbjNiuINmB2LTYsdiv2Ycg2YXbjCDYtNmI2K8g2KfbjNmGINin2YjZhtiqINmB2LHYp9iu2YjYp9mG24wg2YXbjCDYtNmI2K9cclxuICAgKi9cclxuICBAT3V0cHV0KCkgdGV4dEJveEtleURvd24gPSBuZXcgRXZlbnRFbWl0dGVyPElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJFdmVudE1vZGVsPigpO1xyXG4gIC8qKlxyXG4gICAqINmI2YLYqtuMINix2YjbjCDYqtqp2LMg2KjYp9qp2LMg2KfZhtiq2K7Yp9ioINiq2KfYsduM2K4g2KjZhNmI2LEg2YXbjCDYtNmI2K8g2KfbjNmGINin2YjZhtiqINmB2LHYp9iu2YjYp9mG24wg2YXbjCDYtNmI2K9cclxuICAgKi9cclxuICBAT3V0cHV0KCkgdGV4dEJveEJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyPElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJFdmVudE1vZGVsPigpO1xyXG4gIC8qKlxyXG4gICAqINmI2YLYqtuMINix2YjbjCDYqtqp2LMg2KjYp9qp2LMg2KfZhtiq2K7Yp9ioINiq2KfYsduM2K4g2YHZiNqp2YjYsyDZhduMINi02YjYryDYp9uM2YYg2KfZiNmG2Kog2YHYsdin2K7ZiNin2YbbjCDZhduMINi02YjYr1xyXG4gICAqL1xyXG4gIEBPdXRwdXQoKSB0ZXh0Qm94Rm9jdXMgPSBuZXcgRXZlbnRFbWl0dGVyPElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJFdmVudE1vZGVsPigpO1xyXG4gIC8qKlxyXG4gICAqINmI2YLYqtuMINix2YjbjCDYqtqp2LMg2KjYp9qp2LMg2KfZhtiq2K7Yp9ioINiq2KfYsduM2K4g2KrYutuM24zYsduMINin24zYrNin2K8g2YXbjCDYtNmI2K8g2KfbjNmGINin2YjZhtiqINmB2LHYp9iu2YjYp9mG24wg2YXbjCDYtNmI2K9cclxuICAgKi9cclxuICBAT3V0cHV0KCkgdGV4dEJveENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8SU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlckV2ZW50TW9kZWw+KCk7XHJcblxyXG4gIC8vI2VuZHJlZ2lvblxyXG5cclxuICBteUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woKTtcclxuICBwcml2YXRlIGFmdGVyVmlld0luaXQgPSBmYWxzZTtcclxuICBwcml2YXRlIGluQ2xlYXJGdW5jdGlvbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgc2hvd2luZ0RhdGVUaW1lUGlja2VyTG9ja2VkID0gZmFsc2U7XHJcbiAgc2hvd0RhdGVQaWNrZXIgPSBmYWxzZTtcclxuXHJcbiAgcHJpdmF0ZSBfc2VsZWN0ZWREYXRlVGltZTogRGF0ZSA9IG51bGw7XHJcbiAgZ2V0IHNlbGVjdGVkRGF0ZVRpbWUoKTogRGF0ZSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWREYXRlVGltZTtcclxuICB9XHJcbiAgc2V0IHNlbGVjdGVkRGF0ZVRpbWUodmFsdWU6IERhdGUpIHtcclxuICAgIGlmICghdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLnNldERhdGVUaW1lQnlEYXRlKCF2YWx1ZSA/IG51bGwgOiBuZXcgRGF0ZSh2YWx1ZSkpO1xyXG4gICAgICBpZiAodmFsdWUgPT0gbnVsbClcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZERhdGVUaW1lID0gbnVsbDtcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHRoaXMuX3NlbGVjdGVkRGF0ZVRpbWUgPSBuZXcgRGF0ZSh2YWx1ZSk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgX3NlbGVjdGVkRGF0ZVRpbWVSYW5nZXM6IERhdGVbXSA9IG51bGw7XHJcbiAgZ2V0IHNlbGVjdGVkRGF0ZVRpbWVSYW5nZXMoKTogRGF0ZVtdIHtcclxuICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZERhdGVUaW1lUmFuZ2VzO1xyXG4gIH1cclxuICBzZXQgc2VsZWN0ZWREYXRlVGltZVJhbmdlcyh2YWx1ZXM6IERhdGVbXSkge1xyXG4gICAgaWYgKCF0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZSkgcmV0dXJuO1xyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKHZhbHVlcyA9PSBudWxsIHx8IHZhbHVlcy5sZW5ndGggPCAyKSByZXR1cm47XHJcbiAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLnNldERhdGVUaW1lUmFuZ2VzQnlEYXRlKFxyXG4gICAgICAgIHZhbHVlc1swXSA9PSBudWxsID8gbnVsbCA6IG5ldyBEYXRlKHZhbHVlc1swXSksXHJcbiAgICAgICAgdmFsdWVzWzFdID09IG51bGwgPyBudWxsIDogbmV3IERhdGUodmFsdWVzWzFdKSk7XHJcbiAgICAgIHRoaXMuX3NlbGVjdGVkRGF0ZVRpbWVSYW5nZXMgPSBbdmFsdWVzWzBdLCB2YWx1ZXNbMV1dO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGdldEV2ZW50T2JqZWN0KGV2ZW50OiBhbnkpOiBJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRXZlbnRNb2RlbCB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBldmVudEFyZ3M6IGV2ZW50LFxyXG4gICAgICBzZWxlY3RlZERhdGU6IHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLmdldFNlbGVjdGVkRGF0ZSxcclxuICAgICAgc2VsZWN0ZWRSYW5nZURhdGVzOiB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5nZXRTZWxlY3RlZFJhbmdlRGF0ZXNcclxuICAgIH07XHJcbiAgfVxyXG4gIHByaXZhdGUgZ2V0U2VsZWN0ZWREYXRlT2JqZWN0KCk6IElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJEYXRlTW9kZWwge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2VsZWN0ZWREYXRlOiB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5nZXRTZWxlY3RlZERhdGUsXHJcbiAgICAgIHNlbGVjdGVkUmFuZ2VEYXRlczogdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuZ2V0U2VsZWN0ZWRSYW5nZURhdGVzXHJcbiAgICB9O1xyXG4gIH1cclxuICBzaG93RGF0ZVBpY2tlckJ1dHRvbkNsaWNrZWQoKSB7XHJcbiAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gIXRoaXMuc2hvd0RhdGVQaWNrZXI7XHJcbiAgICBpZiAodGhpcy5zaG93RGF0ZVBpY2tlcikge1xyXG4gICAgICAvL2NvbnN0IHJlY3RPYmplY3QgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgLy90aGlzLnRvcE9mZnNldCA9IHJlY3RPYmplY3QudG9wO1xyXG4gICAgICAvL3RoaXMubGVmdE9mZnNldCA9IHJlY3RPYmplY3QubGVmdDtcclxuICAgIH1cclxuICB9XHJcbiAgZGF0ZUNoYW5nZWRIYW5kbGVyKGRhdGU6IElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJEYXRlKSB7XHJcbiAgICBpZiAoIXRoaXMuYWZ0ZXJWaWV3SW5pdCkgcmV0dXJuO1xyXG4gICAgdGhpcy5kYXRlQ2hhbmdlZC5lbWl0KGRhdGUpO1xyXG4gICAgaWYgKGRhdGUgIT0gbnVsbCkge1xyXG4gICAgICB0aGlzLm15Q29udHJvbC5zZXRWYWx1ZShkYXRlLmZvcm1hdFN0cmluZyk7XHJcbiAgICAgIHRoaXMuc2VsZWN0ZWREYXRlVGltZSA9IG5ldyBEYXRlKGRhdGUudXRjRGF0ZVRpbWUpO1xyXG4gICAgICBpZiAoIXRoaXMuc2hvd2luZ0RhdGVUaW1lUGlja2VyTG9ja2VkKVxyXG4gICAgICAgIHRoaXMuc2hvd0RhdGVQaWNrZXIgPSBmYWxzZTtcclxuICAgICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UodGhpcy5nZXRTZWxlY3RlZERhdGVPYmplY3QoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJhbmdlRGF0ZUNoYW5nZWRIYW5kbGVyKHJhbmdlRGF0ZTogSU1kc0FuZ3VsYXJEYXRlVGltZVBpY2tlclJhbmdlRGF0ZSkge1xyXG4gICAgaWYgKCF0aGlzLmFmdGVyVmlld0luaXQpIHJldHVybjtcclxuICAgIHRoaXMubXlDb250cm9sLnNldFZhbHVlKCcnKTtcclxuICAgIGlmIChyYW5nZURhdGUgPT0gbnVsbCkge1xyXG4gICAgICB0aGlzLnJhbmdlRGF0ZUNoYW5nZWQuZW1pdChyYW5nZURhdGUpO1xyXG4gICAgICB0aGlzLnNlbGVjdGVkRGF0ZVRpbWVSYW5nZXMgPSBbbnVsbCwgbnVsbF07XHJcbiAgICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHRoaXMuZ2V0U2VsZWN0ZWREYXRlT2JqZWN0KCkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAocmFuZ2VEYXRlLnN0YXJ0RGF0ZS5mb3JtYXRTdHJpbmcgIT0gJycgJiYgcmFuZ2VEYXRlLmVuZERhdGUuZm9ybWF0U3RyaW5nICE9ICcnKVxyXG4gICAgICB0aGlzLm15Q29udHJvbC5zZXRWYWx1ZShgJHtyYW5nZURhdGUuc3RhcnREYXRlLmZvcm1hdFN0cmluZ30gLSAke3JhbmdlRGF0ZS5lbmREYXRlLmZvcm1hdFN0cmluZ31gKTtcclxuICAgIHRoaXMucmFuZ2VEYXRlQ2hhbmdlZC5lbWl0KHJhbmdlRGF0ZSk7XHJcbiAgICBpZiAocmFuZ2VEYXRlLnN0YXJ0RGF0ZS5mb3JtYXRTdHJpbmcgIT0gJycgJiYgcmFuZ2VEYXRlLmVuZERhdGUuZm9ybWF0U3RyaW5nICE9ICcnICYmICF0aGlzLnNob3dpbmdEYXRlVGltZVBpY2tlckxvY2tlZClcclxuICAgICAgdGhpcy5zaG93RGF0ZVBpY2tlciA9IGZhbHNlO1xyXG4gICAgdGhpcy5zZWxlY3RlZERhdGVUaW1lUmFuZ2VzID0gW3JhbmdlRGF0ZS5zdGFydERhdGUudXRjRGF0ZVRpbWUsIHJhbmdlRGF0ZS5lbmREYXRlLnV0Y0RhdGVUaW1lXTtcclxuICAgIHRoaXMucHJvcGFnYXRlQ2hhbmdlKHRoaXMuZ2V0U2VsZWN0ZWREYXRlT2JqZWN0KCkpO1xyXG4gIH1cclxuICBkYXRlVGltZVRleHRCb3hPbkZvY3VzSGFuZGxlcihldmVudDogYW55KSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLmNsaWNrKCk7XHJcbiAgICB0cnkge1xyXG4gICAgICBpZiAodGhpcy5zZWxlY3RlZERhdGVUaW1lICE9IG51bGwpXHJcbiAgICAgICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuc2V0RGF0ZVRpbWVCeURhdGUodGhpcy5zZWxlY3RlZERhdGVUaW1lKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zaG93RGF0ZVBpY2tlckJ1dHRvbkNsaWNrZWQoKTtcclxuICAgIHRoaXMudGV4dEJveEZvY3VzLmVtaXQodGhpcy5nZXRFdmVudE9iamVjdChldmVudCkpO1xyXG4gIH1cclxuICBkYXRlVGltZVRleHRCb3hPbkJsdXJIYW5kbGVyKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgIGxldCB2YWx1ZSA9ICF0aGlzLm15Q29udHJvbC52YWx1ZSA/ICcnIDogdGhpcy5teUNvbnRyb2wudmFsdWUudHJpbSgpO1xyXG4gICAgaWYgKHRoaXMucGVyc2lhbkNoYXIpXHJcbiAgICAgIHZhbHVlID0gTWRzRGF0ZXRpbWVQaWNrZXJVdGlsaXR5LnRvUGVyc2lhbk51bWJlcih2YWx1ZSk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHZhbHVlID0gTWRzRGF0ZXRpbWVQaWNrZXJVdGlsaXR5LnRvRW5nbGlzaFN0cmluZyh2YWx1ZSk7XHJcbiAgICBsZXQgdGFyZ2V0RWxlbWVudCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgIGlmICghdGFyZ2V0RWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbWRzLXBlcnNpYW4tZGF0ZXRpbWVwaWNrZXInKSkge1xyXG4gICAgICB0aGlzLnNob3dpbmdEYXRlVGltZVBpY2tlckxvY2tlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLnNldERhdGVUaW1lQnlTdHJpbmcodmFsdWUpO1xyXG4gICAgICB0aGlzLnNob3dpbmdEYXRlVGltZVBpY2tlckxvY2tlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdGhpcy50ZXh0Qm94Qmx1ci5lbWl0KHRoaXMuZ2V0RXZlbnRPYmplY3QoZXZlbnQpKTtcclxuICB9XHJcbiAgZGF0ZVRpbWVUZXh0Qm94T25LZXlEb3duSGFuZGxlcihldmVudDogYW55KTogdm9pZCB7XHJcbiAgICBpZiAoZXZlbnQua2V5Q29kZSAhPSAxMykge1xyXG4gICAgICB0aGlzLnRleHRCb3hLZXlEb3duLmVtaXQodGhpcy5nZXRFdmVudE9iamVjdChldmVudCkpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUudHJpbSgpO1xyXG4gICAgaWYgKCF2YWx1ZSlcclxuICAgICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuY2xlYXJEYXRlVGltZVBpY2tlcigpO1xyXG4gICAgZWxzZVxyXG4gICAgICB0aGlzLm1kc0RhdGVUaW1lUGlja2VyQ29yZS5zZXREYXRlVGltZUJ5U3RyaW5nKHZhbHVlKTtcclxuICAgIHRoaXMuc2hvd0RhdGVQaWNrZXIgPSBmYWxzZTtcclxuICAgIHRoaXMudGV4dEJveEtleURvd24uZW1pdCh0aGlzLmdldEV2ZW50T2JqZWN0KGV2ZW50KSk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIGlmICh0aGlzLmluQ2xlYXJGdW5jdGlvbiB8fCAhdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUpIHJldHVybjtcclxuICAgIHRoaXMuaW5DbGVhckZ1bmN0aW9uID0gdHJ1ZTtcclxuICAgIHRoaXMubXlDb250cm9sLnNldFZhbHVlKCcnKTtcclxuICAgIHRoaXMuc2VsZWN0ZWREYXRlVGltZSA9IG51bGw7XHJcbiAgICB0aGlzLnNlbGVjdGVkRGF0ZVRpbWVSYW5nZXMgPSBbbnVsbCwgbnVsbF07XHJcblxyXG4gICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuY2xlYXJEYXRlVGltZVBpY2tlcigpO1xyXG4gICAgdGhpcy5pbkNsZWFyRnVuY3Rpb24gPSBmYWxzZTtcclxuICB9XHJcbiAgc2V0RGF0ZVRpbWUoZGF0ZVRpbWU6IERhdGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHRoaXMubWRzRGF0ZVRpbWVQaWNrZXJDb3JlLnNldERhdGVUaW1lQnlEYXRlKGRhdGVUaW1lKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH1cclxuICBzZXREYXRlVGltZVJhbmdlcyhzdGFydERhdGVUaW1lOiBEYXRlLCBlbmREYXRlVGltZTogRGF0ZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgdGhpcy5tZHNEYXRlVGltZVBpY2tlckNvcmUuc2V0RGF0ZVRpbWVSYW5nZXNCeURhdGUoc3RhcnREYXRlVGltZSwgZW5kRGF0ZVRpbWUpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICB0aGlzLmNsZWFyKCk7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNob3dEYXRlVGltZVBpY2tlcigpIHtcclxuICAgIHRoaXMuc2hvd0RhdGVQaWNrZXIgPSB0cnVlO1xyXG4gIH1cclxuICBoaWRlRGF0ZVRpbWVQaWNrZXIoKSB7XHJcbiAgICB0aGlzLnNob3dEYXRlUGlja2VyID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICAvLyNyZWdpb24gQ29udHJvbFZhbHVlQWNjZXNzb3JcclxuXHJcbiAgcHJpdmF0ZSBwcm9wYWdhdGVDaGFuZ2U6IGFueSA9ICgpID0+IHsgfTtcclxuICBwcml2YXRlIHZhbElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJEYXRlRm46IGFueSA9ICgpID0+IHsgfTtcclxuXHJcbiAgd3JpdGVWYWx1ZSh2YWx1ZU1vZGVsOiBJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZU1vZGVsKTogdm9pZCB7XHJcbiAgICBpZiAoIXZhbHVlTW9kZWwgfHwgKCF2YWx1ZU1vZGVsLnNlbGVjdGVkRGF0ZSAmJiAhdmFsdWVNb2RlbC5zZWxlY3RlZFJhbmdlRGF0ZXMpKSB7XHJcbiAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMucmFuZ2VTZWxlY3RvciAmJiB2YWx1ZU1vZGVsLnNlbGVjdGVkUmFuZ2VEYXRlcylcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVUaW1lUmFuZ2VzID0gW3ZhbHVlTW9kZWwuc2VsZWN0ZWRSYW5nZURhdGVzLnN0YXJ0RGF0ZS51dGNEYXRlVGltZSwgdmFsdWVNb2RlbC5zZWxlY3RlZFJhbmdlRGF0ZXMuZW5kRGF0ZS51dGNEYXRlVGltZV07XHJcbiAgICBlbHNlIGlmICh2YWx1ZU1vZGVsLnNlbGVjdGVkRGF0ZSlcclxuICAgICAgdGhpcy5zZWxlY3RlZERhdGVUaW1lID0gdmFsdWVNb2RlbC5zZWxlY3RlZERhdGUudXRjRGF0ZVRpbWU7XHJcbiAgfVxyXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46IGFueSk6IHZvaWQge1xyXG4gICAgdGhpcy5wcm9wYWdhdGVDaGFuZ2UgPSBmbjtcclxuICB9XHJcbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xyXG5cclxuICB9XHJcbiAgc2V0RGlzYWJsZWRTdGF0ZT8oaXNEaXNhYmxlZDogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgLy90aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZFxyXG4gICAgaWYgKGlzRGlzYWJsZWQpXHJcbiAgICAgIHRoaXMubXlDb250cm9sLmRpc2FibGUoKTtcclxuICAgIGVsc2VcclxuICAgICAgdGhpcy5teUNvbnRyb2wuZW5hYmxlKCk7XHJcbiAgfVxyXG5cclxuICB2YWxJTWRzQW5ndWxhckRhdGVUaW1lUGlja2VyRGF0ZShjOiBhbnkpIHtcclxuICAgIHJldHVybiB0aGlzLnZhbElNZHNBbmd1bGFyRGF0ZVRpbWVQaWNrZXJEYXRlRm4oYy52YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvLyNlbmRyZWdpb25cclxufSJdfQ==